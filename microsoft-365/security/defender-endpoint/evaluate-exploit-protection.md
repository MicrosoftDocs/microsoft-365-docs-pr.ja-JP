---
title: デモでのエクスプロイト保護の動作を確認する
description: Exploit Protection によって、特定のアプリで疑わしい動作が発生するのを防ぐ方法について説明します。
keywords: エクスプロイト保護、エクスプロイト、カーネル、イベント、評価、デモ、試用、軽減
search.product: eADQiWindows 10XVcnh
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
ms.pagetype: security
localization_priority: Normal
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.date: 01/06/2021
ms.reviewer: ''
manager: dansimp
ms.technology: mde
ms.openlocfilehash: 4068c9e59872854a3d027395a55052bfa6841528
ms.sourcegitcommit: 956176ed7c8b8427fdc655abcd1709d86da9447e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/23/2021
ms.locfileid: "51064196"
---
# <a name="evaluate-exploit-protection"></a>エクスプロイト保護の評価

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]

**適用対象:**
- [Microsoft Defender for Endpoint](https://go.microsoft.com/fwlink/?linkid=2154037)
- [Microsoft 365 Defender](https://go.microsoft.com/fwlink/?linkid=2118804)

>Microsoft Defender for Endpoint を体験してみませんか? [無料試用版にサインアップします。](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-enablesiem-abovefoldlink)


[エクスプロイト保護](exploit-protection.md) は、悪用を使用して他のデバイスを拡散および感染するマルウェアからデバイスを保護するのに役立ちます。 軽減策は、オペレーティング システムまたは個々のアプリに適用できます。 拡張軽減エクスペリエンス サービス (EMET) の一部Toolkit機能の多くは、エクスプロイト保護に含まれています。 (EMET はサポートの終了に達しました。

監査では、テスト環境の特定のアプリに対する軽減策の仕組みについて確認できます。 これは、実稼働 *環境で* エクスプロイト保護を有効にした場合に何が起こったかを示します。 これにより、悪用保護が業務上のアプリに悪影響を及ぼさなかったり、疑わしいイベントや悪意のあるイベントが発生したのか確認できます。

> [!TIP]
> また、Microsoft Defender Testground の Web サイトを [参照して](https://demo.wd.microsoft.com?ocid=cx-wddocs-testground) 、demo.wd.microsoft.com の動作を確認できます。

## <a name="enable-exploit-protection-for-testing"></a>テスト用のエクスプロイト保護を有効にする

特定のプログラムのテスト モードで軽減策を設定するには、Windows セキュリティ アプリまたはアプリを使用Windows PowerShell。

### <a name="windows-security-app"></a>Windows セキュリティ アプリ

1. Windows セキュリティ アプリを開きます。 タスク バーのシールド アイコンを選択するか、Defender のスタート メニューを検索 **します**。

2. [App **& コントロール** ] タイル (または左側のメニュー バーのアプリ アイコン) を選択し、[エクスプロイト保護] **を選択します**。

3. [プログラムの **設定] に移動** し、保護を適用するアプリを選択します。

    1. 構成するアプリが既に一覧表示されている場合は、そのアプリを選択し、[編集] を選択 **します。**
    2. アプリが一覧の上部に表示されていない場合は、[プログラムの追加] を **選択してカスタマイズします**。 次に、アプリの追加方法を選択します。
        - [ **プログラム名で追加] を** 使用して、その名前を持つ実行中のプロセスに軽減策を適用します。 拡張子が付くファイルを指定します。 完全なパスを入力すると、その場所に名前が付くアプリにのみ軽減策を制限できます。
        - 標準の Windows Explorer **ファイル ピッカー** ウィンドウを使用して、目的のファイルを検索して選択するには、[厳密なファイル パスを選択する] を使用します。

4. アプリを選択すると、適用できるすべての軽減策の一覧が表示されます。 [監査] **を選択** すると、監査モードでのみ軽減策が適用されます。 プロセス、アプリ、または Windows を再起動する必要がある場合は、通知されます。

5. 構成するアプリと軽減策について、この手順を繰り返します。 構成 **の設定** が完了したら、[適用] を選択します。

### <a name="powershell"></a>PowerShell

アプリ レベルの軽減策を監査モードに設定するには、監査 `Set-ProcessMitigation` モード **コマンドレットを使用** します。

各軽減策を次の形式で構成します。

```PowerShell
Set-ProcessMitigation -<scope> <app executable> -<action> <mitigation or options>,<mitigation or options>,<mitigation or options>
```

ここで、
```
* \<Scope>:
  * `-Name` to indicate the mitigations should be applied to a specific app. Specify the app's executable after this flag.
* \<Action>:
  * `-Enable` to enable the mitigation
    * `-Disable` to disable the mitigation
* \<Mitigation>:
  * The mitigation's cmdlet as defined in the following table. Each mitigation is separated with a comma.
```
 |軽減策 | 監査モードのコマンドレット |
|---|---|
 |任意の Code Guard (ACG) | `AuditDynamicCode` |
 |低整合性イメージをブロックする | `AuditImageLoad`
 |信頼されていないフォントをブロックする | `AuditFont`, `FontAuditOnly` |
 |コード整合性ガード | `AuditMicrosoftSigned`, `AuditStoreSigned` |
 |Win32k システム呼び出しを無効にする | `AuditSystemCall` |
 |子プロセスを許可しない | `AuditChildProcess` |

たとえば、次のコマンドを実行して、testing.exeという名前のアプリの監査モードで任意の *Code* Guard (ACG) を有効にします。

```PowerShell
Set-ProcessMitigation -Name c:\apps\lob\tests\testing.exe -Enable AuditDynamicCode
```

に置き **換え、** 監査モードを無効 `-Enable` にできます `-Disable` 。

## <a name="review-exploit-protection-audit-events"></a>エクスプロイト保護監査イベントの確認

ブロックされているアプリを確認するには、イベント ビューアーを開き、次のイベントをフィルター処理して、Security-Mitigationsします。

| 機能 | プロバイダー/ソース | イベント ID | 説明 |
|---|---|--|---|
| エクスプロイト保護 | Security-Mitigations (カーネル モード/ユーザー モード) | 1 | ACG 監査 |
| エクスプロイト保護 | Security-Mitigations (カーネル モード/ユーザー モード) | 3 | 子プロセスの監査を許可しない |
| エクスプロイト保護 | Security-Mitigations (カーネル モード/ユーザー モード) | 5 | 低整合性イメージの監査をブロックする |
| エクスプロイト保護 | Security-Mitigations (カーネル モード/ユーザー モード) | 7 | リモート イメージの監査をブロックする |
| エクスプロイト保護 | Security-Mitigations (カーネル モード/ユーザー モード) | 9 | win32k システム呼び出しの監査を無効にする |
| エクスプロイト保護 | Security-Mitigations (カーネル モード/ユーザー モード) | 11 | コード整合性ガードの監査 |

## <a name="see-also"></a>関連項目

- [エクスプロイト保護を有効にする](enable-exploit-protection.md)
- [エクスプロイト保護の軽減策の構成と監査](customize-exploit-protection.md)
- [エクスプロイト保護構成のインポート、エクスポート、および展開](import-export-exploit-protection-emet-xml.md)
- [エクスプロイト保護のトラブルシューティング](troubleshoot-exploit-protection-mitigations.md)
