---
title: ネットワーク アップロードを使用して、組織の PST ファイルをインポートする
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Priority
ms.collection:
- Strat_O365_IP
- M365-security-compliance
search.appverid:
- MOE150
- MED150
- MET150
ms.assetid: 103f940c-0468-4e1a-b527-cc8ad13a5ea6
description: '管理者向け: ネットワーク アップロードを使用して、複数の PST ファイルを Microsoft 365 のユーザー メールボックスに一括インポートする方法について説明します。'
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: ebbc9b080bf42ef309741dc8bfa4283df9776902
ms.sourcegitcommit: a6fb731fdf726d7d9fe4232cf69510013f2b54ce
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/27/2021
ms.locfileid: "52683988"
---
# <a name="use-network-upload-to-import-your-organizations-pst-files-to-microsoft-365"></a><span data-ttu-id="dac46-103">ネットワーク アップロードを使用して、組織の PST ファイルを Microsoft 365 にインポートする</span><span class="sxs-lookup"><span data-stu-id="dac46-103">Use network upload to import your organization's PST files to Microsoft 365</span></span>

> [!NOTE]
> <span data-ttu-id="dac46-104">この記事は管理者向けです。</span><span class="sxs-lookup"><span data-stu-id="dac46-104">This article is for administrators.</span></span> <span data-ttu-id="dac46-105">自分のメールボックスに PST ファイルをインポートしようとしていますか?</span><span class="sxs-lookup"><span data-stu-id="dac46-105">Are you trying to import PST files to your own mailbox?</span></span> <span data-ttu-id="dac46-106">「[Outlook .pst ファイルからメール、連絡先、予定表をインポートする](https://go.microsoft.com/fwlink/p/?LinkID=785075)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-106">See [Import email, contacts, and calendar from an Outlook .pst file](https://go.microsoft.com/fwlink/p/?LinkID=785075)</span></span>
  
<span data-ttu-id="dac46-107">ネットワーク アップロードを使用して、複数の PST ファイルを Microsoft 365 のメールボックスに一括インポートするために必要なステップ バイ ステップによる手順を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="dac46-107">Here are the step-by-step instructions required to use network upload to bulk-import multiple PST files to Microsoft 365 mailboxes.</span></span> <span data-ttu-id="dac46-108">ネットワーク アップロードを使用した Microsoft 365 メールボックスへの PST ファイルの一括インポートについてよく寄せられる質問については、「[ネットワーク アップロードを使用して PST ファイルをインポートすることについてよく寄せられる質問](./faqimporting-pst-files-to-office-365.yml#using-network-upload-to-import-pst-files)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-108">For frequently asked questions about using network upload to bulk-import PST files to Microsoft 365 mailboxes, see [FAQs for using network upload to import PST files](./faqimporting-pst-files-to-office-365.yml#using-network-upload-to-import-pst-files).</span></span>
  
[<span data-ttu-id="dac46-109">手順 1: SAS URL をコピーして AzCopy をインストールする</span><span class="sxs-lookup"><span data-stu-id="dac46-109">Step 1: Copy the SAS URL and install AzCopy</span></span>](#step-1-copy-the-sas-url-and-install-azcopy)

[<span data-ttu-id="dac46-110">手順 2: Microsoft 365 に PST ファイルをアップロードする</span><span class="sxs-lookup"><span data-stu-id="dac46-110">Step 2: Upload your PST files to Microsoft 365</span></span>](#step-2-upload-your-pst-files-to-office-365)

[<span data-ttu-id="dac46-111">(省略可能) 手順 3: アップロードされた PST ファイルのリストを表示する</span><span class="sxs-lookup"><span data-stu-id="dac46-111">(Optional) Step 3: View a list of the PST files uploaded</span></span>](#optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365)

[<span data-ttu-id="dac46-112">手順 4: PST インポート マッピング ファイルを作成する</span><span class="sxs-lookup"><span data-stu-id="dac46-112">Step 4: Create the PST Import mapping file</span></span>](#step-4-create-the-pst-import-mapping-file)

[<span data-ttu-id="dac46-113">手順 5: PST インポート ジョブを作成する</span><span class="sxs-lookup"><span data-stu-id="dac46-113">Step 5: Create a PST Import job</span></span>](#step-5-create-a-pst-import-job)

[<span data-ttu-id="dac46-114">手順 6: データをフィルター処理して、PST インポート ジョブを開始する</span><span class="sxs-lookup"><span data-stu-id="dac46-114">Step 6: Filter data and start the PST Import job</span></span>](#step-6-filter-data-and-start-the-pst-import-job)

<span data-ttu-id="dac46-p103">PST ファイルを Microsoft 365 メールボックスにインポートするには、1 回だけ手順 1 を行う必要があります。これらの手順を実行した後、 PST ファイルのバッチのアップロードとインポートを行うたびに、手順 2 から手順 6 を実行します。</span><span class="sxs-lookup"><span data-stu-id="dac46-p103">You have to perform Step 1 only once to import PST files to Microsoft 365 mailboxes. After you perform these steps, follow Step 2 through Step 6 each time you want to upload and import a batch of PST files.</span></span>

## <a name="before-you-import-pst-files"></a><span data-ttu-id="dac46-117">PST ファイルをインポートする前に</span><span class="sxs-lookup"><span data-stu-id="dac46-117">Before you import PST files</span></span>
  
- <span data-ttu-id="dac46-118">PST ファイルを Microsoft 365 メールボックスにインポートするには、Exchange Online で Mailbox Import Export の役割が割り当てられている必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-118">You have to be assigned the Mailbox Import Export role in Exchange Online to import PST files to Microsoft 365 mailboxes.</span></span> <span data-ttu-id="dac46-119">既定では、この役割は Exchange Online のどの役割グループにも割り当てられていません。</span><span class="sxs-lookup"><span data-stu-id="dac46-119">By default, this role isn't assigned to any role group in Exchange Online.</span></span> <span data-ttu-id="dac46-120">Mailbox Import Export の役割は組織の管理の役割グループに追加できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-120">You can add the Mailbox Import Export role to the Organization Management role group.</span></span> <span data-ttu-id="dac46-121">または、役割グループを作成し、Mailbox Import Export の役割を割り当て、ユーザー自身をメンバーとして追加できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-121">Or you can create a role group, assign the Mailbox Import Export role, and then add yourself as a member.</span></span> <span data-ttu-id="dac46-122">詳細については、「[役割グループを管理する](/Exchange/permissions-exo/role-groups)」で「役割グループに役割を追加する」または「役割グループを作成する」のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-122">For more information, see the "Add a role to a role group" or the "Create a role group" sections in [Manage role groups](/Exchange/permissions-exo/role-groups).</span></span>

    <span data-ttu-id="dac46-123">また、Microsoft 365 コンプライアンス センターでインポート ジョブを作成するには、次のいずれかを満たす必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-123">Also, to create import jobs in the Microsoft 365 compliance center, one of the following must be true:</span></span>

  - <span data-ttu-id="dac46-p105">Exchange Online の Mail Recipients 役割が割り当てられている必要があります。既定では、この役割は組織の管理の役割グループと受信者の管理の役割グループに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="dac46-p105">You have to be assigned the Mail Recipients role in Exchange Online. By default, this role is assigned to the Organization Management and Recipient Management roles groups.</span></span>

    <span data-ttu-id="dac46-126">または</span><span class="sxs-lookup"><span data-stu-id="dac46-126">Or</span></span>

  - <span data-ttu-id="dac46-127">組織の全体管理者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-127">You have to be a global administrator in your organization.</span></span>

  > [!TIP]
    > <span data-ttu-id="dac46-p106">PST ファイルをインポートするための新しい役割グループを ExchangeOnline で作成することを検討します。PST ファイルをインポートするのに必要な最小レベルの権限では、新しい役割グループに Mailbox Import Export の役割および Mail Recipients の役割を割り当て、メンバーを追加します。</span><span class="sxs-lookup"><span data-stu-id="dac46-p106">Consider creating a new role group in Exchange Online that's specifically intended for importing PST files. For the minimum level of privileges required to import PST files, assign the Mailbox Import Export and Mail Recipients roles to the new role group, and then add members.</span></span>
  
- <span data-ttu-id="dac46-130">PST ファイルを Microsoft 365 にインポートするためにサポートされている唯一の方法は、このトピックで説明されているように、AzCopy ツールを使用することです。</span><span class="sxs-lookup"><span data-stu-id="dac46-130">The only supported method for importing PST files to Microsoft 365 is to use the AzCopy tool, as described in this topic.</span></span> <span data-ttu-id="dac46-131">Azure Storage Explorer を使用して、PST ファイルを Azure Storage 領域に直接アップロードすることができません。</span><span class="sxs-lookup"><span data-stu-id="dac46-131">You can't use the Azure Storage Explorer to upload PST files directly to the Azure Storage area.</span></span>

- <span data-ttu-id="dac46-p108">Microsoft 365 にインポートする PST ファイルは、組織内のファイル サーバーまたは共有フォルダーに保存する必要があります。手順 2 では、AzCopy ツールを実行して、ファイル サーバーや共有フォルダーに保存されている PST ファイルを Microsoft 365 にアップロードします。</span><span class="sxs-lookup"><span data-stu-id="dac46-p108">You need to store the PST files that you want to import to Microsoft 365 on a file server or shared folder in your organization. In Step 2, you run the AzCopy tool to upload the PST files that are stored on a file server or shared folder to Microsoft 365.</span></span>

- <span data-ttu-id="dac46-134">PST ファイルが大きい場合、PST のインポート プロセスのパフォーマンスに影響を与える場合があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-134">Large PST files may impact the performance of the PST import process.</span></span> <span data-ttu-id="dac46-135">そのため、手順 2で Azure Storage の場所にアップロードするそれぞれの PST ファイルは、20 GB 以下にすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="dac46-135">So we recommend that each PST file you upload to the Azure Storage location in Step 2 should be no larger than 20 GB.</span></span>

- <span data-ttu-id="dac46-136">この手順では、アクセス キーを含む URL をコピーして保存します。</span><span class="sxs-lookup"><span data-stu-id="dac46-136">This procedure involves copying and saving a copy of a URL that contains an access key.</span></span> <span data-ttu-id="dac46-137">この情報は、PST ファイルをアップロードするために手順 2 で、Office 365 にアップロードされた PST ファイルのリストを表示する場合に手順 3 で使用されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-137">This information will be used in Step 2 to upload your PST files, and in Step 3 if you want to view a list of the PST files uploaded to Office 365.</span></span> <span data-ttu-id="dac46-138">パスワードや他のセキュリティ関連の情報を保護するのと同じように、この URL を保護する予防措置を講じる必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-138">Be sure to take precautions to protect this URL like you would protect passwords or other security-related information.</span></span> <span data-ttu-id="dac46-139">たとえば、この URL をパスワードで保護された Microsoft Word ドキュメントに保存したり、暗号化された USB ドライブに保存したりします。</span><span class="sxs-lookup"><span data-stu-id="dac46-139">For example, you might save it to a password-protected Microsoft Word document or to an encrypted USB drive.</span></span> <span data-ttu-id="dac46-140">この URL とキーの組み合わせの例については、「[詳細情報](#more-information)」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-140">See the [More information](#more-information) section for an example of this combined URL and key.</span></span>

- <span data-ttu-id="dac46-141">PST ファイルを Office 365 の非アクティブなメールボックスにインポートできます。</span><span class="sxs-lookup"><span data-stu-id="dac46-141">You can import PST files to an inactive mailbox in Office 365.</span></span> <span data-ttu-id="dac46-142">PST インポート マッピング ファイルの `Mailbox` パラメーターで非アクティブなメールボックスの GUID を指定して、この操作を行います。</span><span class="sxs-lookup"><span data-stu-id="dac46-142">You do this by specifying the GUID of the inactive mailbox in the  `Mailbox` parameter in the PST Import mapping file.</span></span> <span data-ttu-id="dac46-143">詳細については、このトピックの「**手順**」タブの手順 4 を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-143">See Step 4 on the **Instructions** tab in this topic for information.</span></span>

- <span data-ttu-id="dac46-144">Exchange ハイブリッド展開では、オンプレミスのプライマリ メールボックスを持つユーザーのために、PST ファイルをクラウド ベースのアーカイブ メールボックスにインポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="dac46-144">In an Exchange hybrid deployment, you can import PST files to a cloud-based archive mailbox for a user whose primary mailbox is on-premises.</span></span> <span data-ttu-id="dac46-145">PST インポート マッピング ファイルに次を指定して、この操作を行います。</span><span class="sxs-lookup"><span data-stu-id="dac46-145">You do this by doing the following in the PST Import mapping file:</span></span>

  - <span data-ttu-id="dac46-146">`Mailbox` パラメーターに、ユーザーのオンプレミス メールボックス用のメール アドレスを指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-146">Specify the email address for the user's on-premises mailbox in the  `Mailbox` parameter.</span></span>

  - <span data-ttu-id="dac46-147">`IsArchive` パラメーターに、**TRUE** 値を指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-147">Specify the **TRUE** value in the  `IsArchive` parameter.</span></span>

    <span data-ttu-id="dac46-148">詳細については、[手順 4](#step-4-create-the-pst-import-mapping-file) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-148">See [Step 4](#step-4-create-the-pst-import-mapping-file) for more information.</span></span>

- <span data-ttu-id="dac46-149">PST ファイルがインポートされると、メールボックスのアイテム保持ホールド設定が無期限でオンになります。</span><span class="sxs-lookup"><span data-stu-id="dac46-149">After PST files are imported, the retention hold setting for the mailbox is turned on for an indefinite duration.</span></span> <span data-ttu-id="dac46-150">つまり、メールボックスに割り当てられたアイテム保持ポリシーは、アイテム保持ホールドをオフにするか、またはホールドをオフにする日付を設定するまで処理されません。</span><span class="sxs-lookup"><span data-stu-id="dac46-150">This means that the retention policy assigned to the mailbox won't be processed until you turn off the retention hold or set a date to turn off the hold.</span></span> <span data-ttu-id="dac46-151">このようにした理由は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="dac46-151">Why do we do this?</span></span> <span data-ttu-id="dac46-152">メールボックスにインポートされたメッセージは古くなると、完全に削除 (パージ) される可能性があります。これは、メッセージの保持期限がメールボックスに対して構成されたアイテム保持設定に基づいているためです。</span><span class="sxs-lookup"><span data-stu-id="dac46-152">If messages imported to a mailbox are old, they might be permanently deleted (purged) because their retention period has expired based on the retention settings configured for the mailbox.</span></span> <span data-ttu-id="dac46-153">メールボックスに対してアイテム保持ホールドが設定されると、メールボックスの所有者は、新たにインポートされたメッセージを管理する時間、またはメールボックスのアイテム保持設定を変更する時間を確保できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-153">Placing the mailbox on retention hold gives the mailbox owner time to manage these newly imported messages or give you time to change the retention settings for the mailbox.</span></span> <span data-ttu-id="dac46-154">アイテム保持ホールドの管理に関する推奨事項については、このトピックの 「[詳細情報](#more-information)」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-154">See the [More information](#more-information) section in this topic for suggestions about managing the retention hold.</span></span>

- <span data-ttu-id="dac46-155">既定では、Microsoft 365 メールボックスで受信できるメッセージの最大サイズは 35 MB です。</span><span class="sxs-lookup"><span data-stu-id="dac46-155">By default, the maximum message size that can be received by a Microsoft 365 mailbox is 35 MB.</span></span> <span data-ttu-id="dac46-156">これは、メールボックスの *MaxReceiveSize* プロパティの既定値が 35 MB に設定されているためです。</span><span class="sxs-lookup"><span data-stu-id="dac46-156">That's because the default value for the  *MaxReceiveSize*  property for a mailbox is set to 35 MB.</span></span> <span data-ttu-id="dac46-157">ただし、Microsoft 365 のメッセージ受信最大サイズの上限は 150 MB です。</span><span class="sxs-lookup"><span data-stu-id="dac46-157">However, the limit for the maximum message receive size in Microsoft 365 is 150 MB.</span></span> <span data-ttu-id="dac46-158">そのため、35 MB より大きいアイテムを含む PST ファイルをインポートすると、Office 365 インポート サービスにより、対象メールボックスの *MaxReceiveSize* プロパティの値が 150 MB に自動的に変更されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-158">So if you import a PST file that contains an item larger than 35 MB, the Office 365 Import service we will automatically change the value of the  *MaxReceiveSize*  property on the target mailbox to 150 MB.</span></span> <span data-ttu-id="dac46-159">これにより、最大 150 MB のメッセージをユーザーのメールボックスにインポートできます。</span><span class="sxs-lookup"><span data-stu-id="dac46-159">This allows messages up to 150 MB to be imported to user mailboxes.</span></span>

    > [!TIP]
    > <span data-ttu-id="dac46-160">メッセージ受信サイズを識別するには、Exchange Online PowerShell で次のコマンドを実行します: `Get-Mailbox <user mailbox> | FL MaxReceiveSize`</span><span class="sxs-lookup"><span data-stu-id="dac46-160">To identify the message receive size for a mailbox, you can run this command in Exchange Online PowerShell:  `Get-Mailbox <user mailbox> | FL MaxReceiveSize`.</span></span>

- <span data-ttu-id="dac46-161">PST インポート プロセスの概要については、この記事の「[インポート プロセスの流れ](#how-the-import-process-works)」セクションをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="dac46-161">For a high-level overview of the PST Import process, see [How the import process works](#how-the-import-process-works) section in this article.</span></span>

## <a name="step-1-copy-the-sas-url-and-install-azcopy"></a><span data-ttu-id="dac46-162">手順 1: SAS URL をコピーして AzCopy をインストールする</span><span class="sxs-lookup"><span data-stu-id="dac46-162">Step 1: Copy the SAS URL and install AzCopy</span></span>

<span data-ttu-id="dac46-163">まず、AzCopy ツールをダウンロードしてインストールします。これは、手順 2 で PST ファイルを Office 365 にアップロードするために実行するツールです。</span><span class="sxs-lookup"><span data-stu-id="dac46-163">The first step is to download and install the AzCopy tool, which is the tool that you run in Step 2 to upload PST files to Office 365.</span></span> <span data-ttu-id="dac46-164">組織の SAS URL もコピーします。</span><span class="sxs-lookup"><span data-stu-id="dac46-164">You also copy the SAS URL for your organization.</span></span> <span data-ttu-id="dac46-165">この URL は、組織の Microsoft クラウドにある Azure Storage の場所のネットワーク URL と、Shared Access Signature (SAS) キーの組み合わせです。</span><span class="sxs-lookup"><span data-stu-id="dac46-165">This URL is a combination of the network URL for the Azure Storage location in the Microsoft cloud for your organization and a Shared Access Signature (SAS) key.</span></span> <span data-ttu-id="dac46-166">このキーでは、Azure Storage の場所に PST ファイルをアップロードするために必要な権限が与えられます。</span><span class="sxs-lookup"><span data-stu-id="dac46-166">This key provides you with the necessary permissions to upload PST files to your Azure Storage location.</span></span> <span data-ttu-id="dac46-167">必ず SAS URL を保護するための予防措置を講じてください。</span><span class="sxs-lookup"><span data-stu-id="dac46-167">Be sure to take precautions to protect the SAS URL.</span></span> <span data-ttu-id="dac46-168">これらは組織に固有で、手順 2 で使用されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-168">It's unique to your organization and will be used in Step 2.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="dac46-169">この記事で説明するネットワーク アップロードの方法とコマンド構文を使用して PST ファイルをインポートするには、下の手順 6b でダウンロードできるバージョンの AzCopy を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-169">To import PST files using the network upload method and command syntax documented in this article, you must use the version of AzCopy that can be downloaded in step 6b in the following procedure.</span></span> <span data-ttu-id="dac46-170">また、同バージョンの AzCopy は、[こちら](https://aka.ms/downloadazcopy)からもダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="dac46-170">You can also download that same version of AzCopy from [here](https://aka.ms/downloadazcopy).</span></span> <span data-ttu-id="dac46-171">これ以外のバージョンの AzCopy の使用はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="dac46-171">Using a different version of AzCopy isn't supported.</span></span>
  
1. <span data-ttu-id="dac46-172"><https://compliance.microsoft.com> に移動し、組織の管理者アカウントの資格情報を使用してサインインします。</span><span class="sxs-lookup"><span data-stu-id="dac46-172">Go to <https://compliance.microsoft.com> and sign in using the credentials for an administrator account in your organization.</span></span>

2. <span data-ttu-id="dac46-173">Microsoft 365 コンプライアンス センターの左のウィンドウで、[**情報ガバナンス**] \> [**インポート**] の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-173">In the left pane of the Microsoft 365 compliance center, click **Information governance** \> **Import**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="dac46-174">Microsoft 365 コンプライアンス センターの [**インポート**] ページにアクセスするには、適切なアクセス許可の割り当てが必要です。</span><span class="sxs-lookup"><span data-stu-id="dac46-174">You have to be assigned the appropriate permissions to access the **Import** page in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="dac46-175">詳細については、「**はじめに**」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-175">See the **Before you begin** section for more information.</span></span> 

3. <span data-ttu-id="dac46-176">[**インポート**] タブで、[![追加アイコン](../media/ITPro-EAC-AddIcon.gif)] > [**新規インポート ジョブ**] の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-176">On the **Import** tab, click ![Add Icon](../media/ITPro-EAC-AddIcon.gif) **New import job**.</span></span>

    <span data-ttu-id="dac46-177">ジョブのインポート ウィザードが表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-177">The import job wizard is displayed.</span></span>

4. <span data-ttu-id="dac46-178">PST インポート ジョブの名前を入力し、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-178">Type a name for the PST import job, and then click **Next**.</span></span> <span data-ttu-id="dac46-179">小文字の英字、数字、ハイフン、およびアンダー スコアを使用します。</span><span class="sxs-lookup"><span data-stu-id="dac46-179">Use lowercase letters, numbers, hyphens, and underscores.</span></span> <span data-ttu-id="dac46-180">大文字を使用したり、名前にスペースを含めたりすることはできません。</span><span class="sxs-lookup"><span data-stu-id="dac46-180">You can't use uppercase letters or include spaces in the name.</span></span>

5. <span data-ttu-id="dac46-181">[**データをアップロードまたは配送しますか?**] ページで、[**データをアップロードする**] をクリックし、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-181">On the **Do you want to upload or ship data?** page, click **Upload your data** and then click **Next**.</span></span>

    ![[データをアップロードする] をクリックして、ネットワーク アップロードのインポート ジョブを作成する](../media/e59f9dc3-ccde-44ff-ac38-c4e39d76ae85.png)
  
6. <span data-ttu-id="dac46-183">[**データのインポート**] ページで、次の 2 つの操作を行います。</span><span class="sxs-lookup"><span data-stu-id="dac46-183">On the **Import data** page, do the following two things:</span></span>

    ![[データのインポート] ページで SAS URL をコピーして AzCopy ツールをダウンロードする](../media/74411014-ec4b-4e25-9065-404c934cce17.png)
  
    1. <span data-ttu-id="dac46-185">手順 2 で、[**ネットワーク アップロード SAS URL を表示する**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-185">In step 2, click **Show network upload SAS URL**.</span></span> <span data-ttu-id="dac46-186">SAS URL が表示されたら、[**クリップボードにコピー**] をクリックしてから、ファイルに貼り付けて保存し、後でアクセスできるようにします。</span><span class="sxs-lookup"><span data-stu-id="dac46-186">After the SAS URL is displayed, click **Copy to clipboard** and then paste it and save it to a file so you can access it later.</span></span>

    2. <span data-ttu-id="dac46-187">手順 3 では、[**Azure AzCopy ツールのダウンロード**] をクリックし、AzCopy ツールをダウンロードしてインストールします。</span><span class="sxs-lookup"><span data-stu-id="dac46-187">In step 3, click **Download Azure AzCopy** to download and install the AzCopy tool.</span></span> <span data-ttu-id="dac46-188">ポップアップ ウィンドウで、[**実行**] をクリックして、AzCopy をインストールします。</span><span class="sxs-lookup"><span data-stu-id="dac46-188">In the pop-up window, click **Run** to install AzCopy.</span></span>

   > [!NOTE]
   > <span data-ttu-id="dac46-189">[**データのインポート**] ページを開いたままにしておくか (もう一度 SAS URL をコピーする必要がある場合)、[**キャンセル**] をクリックして閉じることができます。</span><span class="sxs-lookup"><span data-stu-id="dac46-189">You can leave the **Import data** page open (in case you need to copy the SAS URL again) or click **Cancel** to close it.</span></span> 

## <a name="step-2-upload-your-pst-files-to-office-365"></a><span data-ttu-id="dac46-190">手順 2: Office 365 に PST ファイルをアップロードする</span><span class="sxs-lookup"><span data-stu-id="dac46-190">Step 2: Upload your PST files to Office 365</span></span>

<span data-ttu-id="dac46-191">これで、AzCopy.exe ツールを使って Office 365 に PST ファイルをアップロードする準備が整いました。</span><span class="sxs-lookup"><span data-stu-id="dac46-191">Now you're ready to use the AzCopy.exe tool to upload PST files to Office 365.</span></span> <span data-ttu-id="dac46-192">このツールで、PST ファイルを Microsoft クラウドの Azure Storage の場所にアップロードして保存します。</span><span class="sxs-lookup"><span data-stu-id="dac46-192">This tool uploads and stores PST files in an Azure Storage location in the Microsoft cloud.</span></span> <span data-ttu-id="dac46-193">前述したように、PST ファイルをアップロードする Azure Storage の場所は、組織が所在するのと同じ地域の Microsoft データ センターにあります。</span><span class="sxs-lookup"><span data-stu-id="dac46-193">As previously explained, the Azure Storage location that you upload your PST files to is located in the same regional Microsoft datacenter where your organization is located.</span></span> <span data-ttu-id="dac46-194">この手順を完了するには、PST ファイルを組織内のファイル共有やファイル サーバーに配置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-194">To complete this step, the PST files have to be located in a file share or file server in your organization.</span></span> <span data-ttu-id="dac46-195">この手順ではソース ディレクトリと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="dac46-195">This is known as the source directory in this procedure.</span></span> <span data-ttu-id="dac46-196">AzCopy ツールを実行するたびに、別のソース ディレクトリを指定できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-196">Each time you run the AzCopy tool, you can specify a different source directory.</span></span>

> [!NOTE]
> <span data-ttu-id="dac46-197">前述したように、Azure Storage の場所にアップロードするそれぞれの PST ファイルは、20 GB 以下にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-197">As previously stated, each PST file that you upload to the Azure Storage location should be no larger than 20 GB.</span></span> <span data-ttu-id="dac46-198">PST ファイルが 20 GB を超える場合、手順 6 で開始する PST インポートプロセスのパフォーマンスに影響を与える可能性があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-198">PST files larger than 20 GB may impact the performance of the PST import process that you start in Step 6.</span></span> <span data-ttu-id="dac46-199">また、各 PST ファイルには一意の名前が必要です。</span><span class="sxs-lookup"><span data-stu-id="dac46-199">Also, each PST file must have a unique name.</span></span>

1. <span data-ttu-id="dac46-200">ローカル コンピューターでコマンド プロンプトを開きます。</span><span class="sxs-lookup"><span data-stu-id="dac46-200">Open a Command Prompt on your local computer.</span></span>

2. <span data-ttu-id="dac46-201">手順 1 で AzCopy.exe ツールをインストールしたディレクトリに移動します。</span><span class="sxs-lookup"><span data-stu-id="dac46-201">Go to the directory where you installed the AzCopy.exe tool in Step 1.</span></span> <span data-ttu-id="dac46-202">既定の場所にツールをインストールした場合は、`%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy` に移動します。</span><span class="sxs-lookup"><span data-stu-id="dac46-202">If you installed the tool in the default location, go to `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy`.</span></span>

3. <span data-ttu-id="dac46-203">次のコマンドを実行して、PST ファイルを Office 365 にアップロードします。</span><span class="sxs-lookup"><span data-stu-id="dac46-203">Run the following command to upload the PST files to Office 365.</span></span>

    ```powershell
    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y
    ```

    > [!IMPORTANT]
    > <span data-ttu-id="dac46-204">前のコマンドでは、ソースの場所としてディレクトリを指定する必要があります。個々の PST ファイルを指定することはできません。</span><span class="sxs-lookup"><span data-stu-id="dac46-204">You must specify a directory as the source location in the previous command; you can't specify an individual PST file.</span></span> <span data-ttu-id="dac46-205">ソース ディレクトリにあるすべての PST ファイルがアップロードされます。</span><span class="sxs-lookup"><span data-stu-id="dac46-205">All PST files in the source directory will be uploaded.</span></span>

    <span data-ttu-id="dac46-p125">次の表は、AzCopy.exe のパラメーターとそれに必要な値を説明したものです。前の手順で取得した情報は、これらのパラメーターの値に使用されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-p125">The following table describes the AzCopy.exe parameters and their required values. The information you obtained in the previous step is used in the values for these parameters.</span></span>

    | <span data-ttu-id="dac46-208">パラメーター</span><span class="sxs-lookup"><span data-stu-id="dac46-208">Parameter</span></span> | <span data-ttu-id="dac46-209">説明</span><span class="sxs-lookup"><span data-stu-id="dac46-209">Description</span></span> | <span data-ttu-id="dac46-210">例</span><span class="sxs-lookup"><span data-stu-id="dac46-210">Example</span></span> |
    |:-----|:-----|:-----|
    | `/Source:` <br/> |<span data-ttu-id="dac46-211">Office 365 にアップロードする PST ファイルを含む組織内のソース ディレクトリを指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-211">Specifies the source directory in your organization that contains the PST files that will be uploaded to Office 365.</span></span>  <br/> <span data-ttu-id="dac46-212">このパラメーターの値は必ず二重引用符 (" ") で囲むようにしてください。</span><span class="sxs-lookup"><span data-stu-id="dac46-212">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/Source:"\\FILESERVER01\PSTs"` <br/> |
    | `/Dest:` <br/> |<span data-ttu-id="dac46-213">手順 1 で取得した SAS URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-213">Specifies the SAS URL that you obtained in Step 1.</span></span>  <br/> <span data-ttu-id="dac46-214">このパラメーターの値は必ず二重引用符 (" ") で囲むようにしてください。</span><span class="sxs-lookup"><span data-stu-id="dac46-214">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span><br/><br/><span data-ttu-id="dac46-215">**注:** スクリプトまたはバッチ ファイルで SAS URL を使用している場合は、エスケープする必要がある特定の文字に注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-215">**Note:** If you use the SAS URL in a script or batch file, you need to watch out for certain characters that need to be escaped.</span></span> <span data-ttu-id="dac46-216">たとえば、`%` は `%%` に変更し、`&` は `^&` に変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-216">For example, you have to change `%` to `%%` and change `&` to `^&`.</span></span><br/><br/><span data-ttu-id="dac46-217">**ヒント:** (省略可能) PST ファイルをアップロードする Azure Storage の場所にサブフォルダーを指定できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-217">**Tip:** (Optional) You can specify a subfolder in the Azure Storage location to upload the PST files to.</span></span> <span data-ttu-id="dac46-218">SAS URL で ("ingestiondata" の後に) サブフォルダーの場所を追加してこの操作を行います。</span><span class="sxs-lookup"><span data-stu-id="dac46-218">You do this by adding a subfolder location (after "ingestiondata") in the SAS URL.</span></span> <span data-ttu-id="dac46-219">最初の例では、サブフォルダーを指定しません。</span><span class="sxs-lookup"><span data-stu-id="dac46-219">The first example doesn't specify a subfolder.</span></span> <span data-ttu-id="dac46-220">つまり、PST は、Azure Storage の場所の (*ingestiondata* という名前の) ルートにアップロードされます。</span><span class="sxs-lookup"><span data-stu-id="dac46-220">That means the PSTs are uploaded to the root (named  *ingestiondata*) of the Azure Storage location.</span></span> <span data-ttu-id="dac46-221">2 つ目の例では、PST ファイルを Azure Storage の場所のルートにある (*PSTFiles* という名前の) サブフォルダーにアップロードします。</span><span class="sxs-lookup"><span data-stu-id="dac46-221">The second example uploads the PST files to a subfolder (named  *PSTFiles*) in the root of the Azure Storage location.</span></span>  <br/> | `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> <span data-ttu-id="dac46-222">または</span><span class="sxs-lookup"><span data-stu-id="dac46-222">Or</span></span>  <br/>  `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> |
    | `/V:` <br/> |<span data-ttu-id="dac46-223">ログ ファイルに詳細な状態メッセージを出力します。</span><span class="sxs-lookup"><span data-stu-id="dac46-223">Outputs verbose status messages into a log file.</span></span> <span data-ttu-id="dac46-224">既定では、詳細ログ ファイルは AzCopyVerbose.log という名前が付けられ、%localappdata%\microsoft\azure\azcopy に作成されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-224">By default, the verbose log file is named AzCopyVerbose.log in %LocalAppData%\Microsoft\Azure\AzCopy.</span></span> <span data-ttu-id="dac46-225">このオプションで既存のファイルの場所を指定する場合、詳細ログがそのファイルに追加されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-225">If you specify an existing file location for this option, the verbose log will be appended to that file.</span></span>  <br/> <span data-ttu-id="dac46-226">このパラメーターの値は必ず二重引用符 (" ") で囲むようにしてください。</span><span class="sxs-lookup"><span data-stu-id="dac46-226">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/V:"c:\Users\Admin\Desktop\Uploadlog.log"` <br/> |
    | `/S` <br/> |<span data-ttu-id="dac46-227">この省略可能なスイッチによって再帰モードが指定され、AzCopy ツールが `/Source:` パラメーターで指定されるソース ディレクトリのサブフォルダーにある PST ファイルをコピーするようになります。</span><span class="sxs-lookup"><span data-stu-id="dac46-227">This optional switch specifies the recursive mode so that the AzCopy tool copies PSTs files that are located in subfolders in the source directory that is specified by the  `/Source:` parameter.</span></span>  <br/> <span data-ttu-id="dac46-228">**注:** このスイッチを含めると、サブフォルダー内の PST ファイルには、アップロード後、Azure Storage の場所に別のファイルのパス名が指定されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-228">**Note:** If you include this switch, PST files in subfolders will have a different file pathname in the Azure Storage location after they're uploaded.</span></span> <span data-ttu-id="dac46-229">手順 4 で作成した CSV ファイルの正確なファイルのパス名を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-229">You'll have to specify the exact file pathname in the CSV file that you create in Step 4.</span></span>  <br/> | `/S` <br/> |
    | `/Y` <br/> |<span data-ttu-id="dac46-230">この必須スイッチにより、Azure Storage の場所に PST ファイルをアップロードするときに、書き込み専用の SAS トークンを使用できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-230">This required switch allows the use of write-only SAS tokens when you upload the PST files to the Azure Storage location.</span></span> <span data-ttu-id="dac46-231">手順 1 で取得 (および `/Dest:` パラメーターで指定) した SAS URL は書き込み専用の SAS URL であるため、このスイッチを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-231">The SAS URL you obtained in step 1 (and specified in  `/Dest:` parameter) is a write-only SAS URL, which is why you must include this switch.</span></span> <span data-ttu-id="dac46-232">書き込み専用の SAS URL を使用しても、Azure Storage Explorer を使用して Azure Storage の場所にアップロードされた PST ファイルのリストを表示できなくなることはありません。</span><span class="sxs-lookup"><span data-stu-id="dac46-232">A write-only SAS URL won't prevent you from using the Azure Storage Explorer to view a list of the PST files uploaded to the Azure Storage location.</span></span>  <br/> | `/Y` <br/> |

<span data-ttu-id="dac46-233">各パラメーターの実際の値を使う AzCopy.exe ツールの構文の例を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="dac46-233">Here's an example of the syntax for the AzCopy.exe tool using actual values for each parameter:</span></span>

```powershell
  AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
```

<span data-ttu-id="dac46-p131">コマンドを実行すると、PST ファイルのアップロードの進行状況を示す状態メッセージが表示されます。最終の状態メッセージは、正常にアップロードされたファイルの合計数を示しています。</span><span class="sxs-lookup"><span data-stu-id="dac46-p131">After you run the command, status messages are displayed that show the progress of uploading the PST files. A final status message shows the total number of files that were successfully uploaded.</span></span>

> [!TIP]
> <span data-ttu-id="dac46-236">AzCopy.exe コマンドを実行し、すべてのパラメーターが正しいことを確認したら、手順 1 で取得した情報をコピーしたのと同じ (セキュリティで保護された) ファイルにコマンド ライン構文のコピーを保存します。</span><span class="sxs-lookup"><span data-stu-id="dac46-236">After you successfully run the AzCopy.exe command and verify that all the parameters are correct, save a copy of the command line syntax to the same (secured) file where you copied the information you obtained in Step 1.</span></span> <span data-ttu-id="dac46-237">これで、AzCopy.exe ツールを実行して、PST ファイルを Office 365 にアップロードするたびに、コマンド プロンプトにこのコマンドをコピーして貼り付けることができます。</span><span class="sxs-lookup"><span data-stu-id="dac46-237">Then you can copy and paste this command in a Command Prompt each time that you want to run the AzCopy.exe tool to upload PST files to Office 365.</span></span> <span data-ttu-id="dac46-238">変更する必要のある値は、`/Source:` パラメーターの値のみです。</span><span class="sxs-lookup"><span data-stu-id="dac46-238">The only value you might have to change are the ones for the `/Source:` parameter.</span></span> <span data-ttu-id="dac46-239">これは、PST ファイルがあるソース ディレクトリによって異なります。</span><span class="sxs-lookup"><span data-stu-id="dac46-239">This depends on the source directory where the PST files are located.</span></span>

## <a name="optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365"></a><span data-ttu-id="dac46-240">(省略可能) 手順 3: Office 365 にアップロードされた PST ファイルのリストを表示する</span><span class="sxs-lookup"><span data-stu-id="dac46-240">(Optional) Step 3: View a list of the PST files uploaded to Office 365</span></span>

<span data-ttu-id="dac46-p133">オプションの手順として、Microsoft Azure Storage Explorer (無料のオープン ソース ツール) をインストールして使用し、Azure BLOB にアップロードした PST ファイルのリストを表示できます。これを行うには 2 つの理由があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-p133">As an optional step, you can install and use the Microsoft Azure Storage Explorer (which is a free, open-source tool) to view the list of the PST files that you've uploaded to the Azure blob. There are two good reasons to do this:</span></span>
  
- <span data-ttu-id="dac46-243">共有フォルダーまたは組織内のファイル サーバーから PST ファイルが Azure BLOB に正常にアップロードされたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="dac46-243">Verify that PST files from the shared folder or file server in your organization were successfully uploaded to the Azure blob.</span></span>

- <span data-ttu-id="dac46-244">各 PST ファイルのファイル名 (およびファイル名が含まれている場合はサブフォルダーのパス名) が Azure BLOB にアップロードされたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="dac46-244">Verify the filename (and the subfolder pathname if you included one) for each PST file uploaded to the Azure blob.</span></span> <span data-ttu-id="dac46-245">次の手順で PST マッピング ファイルを作成する際、各 PST ファイルに対しファイル名とフォルダーのパス名の両方を指定する必要があるため、この機能は便利です。</span><span class="sxs-lookup"><span data-stu-id="dac46-245">This is helpful when you're creating the PST mapping file in the next step because you have to specify both the folder pathname and filename for each PST file.</span></span> <span data-ttu-id="dac46-246">この名前を確認すると、PST マッピング ファイル内の潜在的なエラーを削減できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-246">Verifying these names can help reduce potential errors in your PST mapping file.</span></span>

<span data-ttu-id="dac46-247">通常、Azure Storage Explorer のスタンドアロン アプリケーションが使用できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-247">The Azure Storage Explorer standalone application is generally available.</span></span> <span data-ttu-id="dac46-248">次の手続きでリンクを使用して、最新バージョンをダウンロードできます。</span><span class="sxs-lookup"><span data-stu-id="dac46-248">You can download the latest version using the link in the following procedure.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="dac46-249">Azure Storage Explorer で PST ファイルをアップロードまたは変更することはできません。</span><span class="sxs-lookup"><span data-stu-id="dac46-249">You can't use the Azure Storage Explorer to upload or modify PST files.</span></span> <span data-ttu-id="dac46-250">PST ファイルをインポートするには、AzCopy を使用する方法のみがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="dac46-250">The only supported method for importing PST files is to use AzCopy.</span></span> <span data-ttu-id="dac46-251">また、Azure BLOB にアップロードした PST ファイルを削除することはできません。</span><span class="sxs-lookup"><span data-stu-id="dac46-251">Also, you can't delete PST files that you've uploaded to the Azure blob.</span></span> <span data-ttu-id="dac46-252">PST ファイルを削除しようとすると、必要なアクセス許可がないというエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-252">If you try to delete a PST file, you'll receive an error about not having the required permissions.</span></span> <span data-ttu-id="dac46-253">なお、すべての PST ファイルは Azure 記憶域から自動的に削除されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-253">Note that all PST files are automatically deleted from your Azure storage area.</span></span> <span data-ttu-id="dac46-254">進捗中のインポート ジョブがない場合、一番新しいインポート ジョブの作成から 30 日後に **ingestiondata** コンテナーのすべての PST ファイルが削除されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-254">If there are no import jobs in progress, then all PST files in the **ingestiondata** container are deleted 30 days after the most recent import job was created.</span></span>
  
<span data-ttu-id="dac46-255">Azure Storage Explorer をインストールし、Azure Storage 領域に接続するには:</span><span class="sxs-lookup"><span data-stu-id="dac46-255">To install the Azure Storage Explorer and connect to your Azure Storage area:</span></span>
  
1. <span data-ttu-id="dac46-256">[Microsoft Azure Storage Explorer ツール](https://go.microsoft.com/fwlink/p/?LinkId=544842)をダウンロードしてインストールします。</span><span class="sxs-lookup"><span data-stu-id="dac46-256">Download and install the [Microsoft Azure Storage Explorer tool](https://go.microsoft.com/fwlink/p/?LinkId=544842).</span></span>

2. <span data-ttu-id="dac46-257">Microsoft Azure Storage Explorer を開始します。</span><span class="sxs-lookup"><span data-stu-id="dac46-257">Start the Microsoft Azure Storage Explorer.</span></span>

3. <span data-ttu-id="dac46-258">**[Azure Storage に接続する]** ダイアログの **[リソースの選択]** ページで、**[BLOB コンテナー]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-258">On the **Select Resource** page in the **Connect to Azure Storage** dialog, click **Blob container**.</span></span>
  
4. <span data-ttu-id="dac46-259">**[認証方法の選択]** ページで、**[Shared access signature (SAS)]** オプションを選択し、**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-259">On the **Select Authentication Method** page, select the **Shared access signature (SAS)** option, and then click **Next**.</span></span>

5. <span data-ttu-id="dac46-260">[**接続情報の入力]** ページで、手順 1 で取得した SAS URL を **[BLOB コンテナー SAS URL]** の下のボックスに貼り付け、**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-260">On the **Enter Connection Info** page, paste the SAS URL that you obtained in Step 1 into the box under **Blob container SAS URL**, and then click **Next**.</span></span> <span data-ttu-id="dac46-261">SAS URL を貼り付けると、**[表示名]** の下のボックスに **ingestiondata** が自動的に入力されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-261">After you paste the SAS URL, the box under **Display name** is auto-populated with **ingestiondata**.</span></span>

6. <span data-ttu-id="dac46-262">**[概要]** ページで、接続情報を確認して **[接続]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-262">On the **Summary** page, you can review the connection information, and then click **Connect**.</span></span>

    <span data-ttu-id="dac46-263">**Ingestiondata** コンテナーが開きます。</span><span class="sxs-lookup"><span data-stu-id="dac46-263">The **ingestiondata** container is opened.</span></span> <span data-ttu-id="dac46-264">これには手順 2 でアップロードした PST ファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="dac46-264">It contains the PST files that you uploaded in Step 2.</span></span> <span data-ttu-id="dac46-265">**ingestiondata** コンテナーは、[**ストレージ アカウント**] \> **(接続コンテナー)** \> [**BLOB コンテナー**] にあります。</span><span class="sxs-lookup"><span data-stu-id="dac46-265">The **ingestiondata** container is located under **Storage Accounts** \> **(Attached Containers)** \> **Blob Containers**.</span></span> 
  
7. <span data-ttu-id="dac46-266">Microsoft Azure Storage Explorer の使用が完了したら、**ingestiondata** を右クリックし、[**デタッチ**] をクリックすると Azure Storage 領域から切断されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-266">When you're finished using the Microsoft Azure Storage Explorer, right-click **ingestiondata**, and then click **Detach** to disconnect from your Azure Storage area.</span></span> <span data-ttu-id="dac46-267">切断しない場合、次に接続しようとするとエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-267">Otherwise, you'll receive an error the next time you try to attach.</span></span>
  
## <a name="step-4-create-the-pst-import-mapping-file"></a><span data-ttu-id="dac46-268">手順 4: PST インポート マッピング ファイルを作成する</span><span class="sxs-lookup"><span data-stu-id="dac46-268">Step 4: Create the PST Import mapping file</span></span>

<span data-ttu-id="dac46-p140">PST ファイルを組織の Azure Storage の場所にアップロードしたら、次は、コンマ区切り値 (CSV) のファイルを作成して、PST ファイルのインポート先のユーザー メールボックスを指定します。PST インポート ジョブを作成する場合は、次の手順でこの CSV ファイルを送信します。</span><span class="sxs-lookup"><span data-stu-id="dac46-p140">After the PST files have been uploaded to the Azure Storage location for your organization, the next step is to create a comma-separated value (CSV) file that specifies which user mailboxes the PST files will be imported to. You'll submit this CSV file in the next step when you create a PST Import job.</span></span>
  
1. <span data-ttu-id="dac46-271">[PST インポート マッピング ファイルのコピーをダウンロードします](https://go.microsoft.com/fwlink/p/?LinkId=544717)。</span><span class="sxs-lookup"><span data-stu-id="dac46-271">[Download a copy of the PST Import mapping file](https://go.microsoft.com/fwlink/p/?LinkId=544717).</span></span>

2. <span data-ttu-id="dac46-p141">CSV ファイルを開くか、ローカル コンピューターに保存します。次の例は、完了した PST インポートのマッピング ファイル (メモ帳で開いた) を示しています。Microsoft Excel を使って CSV ファイルを編集するほうが、はるかに簡単です。</span><span class="sxs-lookup"><span data-stu-id="dac46-p141">Open or save the CSV file to your local computer. The following example shows a completed PST Import mapping file (opened in NotePad). It's much easier to use Microsoft Excel to edit the CSV file.</span></span>

    ```console
    Workload,FilePath,Name,Mailbox,IsArchive,TargetRootFolder,ContentCodePage,SPFileContainer,SPManifestContainer,SPSiteUrl
    Exchange,,annb.pst,annb@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,annb_archive.pst,annb@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,,donh.pst,donh@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,donh_archive.pst,donh@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,PSTFiles,pilarp.pst,pilarp@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,PSTFiles,pilarp_archive.pst,pilarp@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,tonyk.pst,tonyk@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,tonyk_archive.pst,tonyk@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,zrinkam.pst,zrinkam@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,zrinkam_archive.pst,zrinkam@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    ```

    <span data-ttu-id="dac46-p142">CSV ファイルの先頭行やヘッダー行には、PST ファイルをユーザー メールボックスにインポートするために PST インポート サービスで使うパラメーターが一覧表示されます。各パラメーター名はコンマで区切られています。見出し行の下の各行は、PST ファイルを特定のメールボックスにインポートするためのパラメーター値を表します。ユーザー メールボックスにインポートする各 PST ファイルには行が必要です。CSV マッピング ファイルに含めることができる最大行数は 500 行です。500 個を超える PST ファイルをインポートするには、複数のマッピング ファイルを作成し、手順 5 で複数のインポート ジョブを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-p142">The first row, or header row, of the CSV file lists the parameters that will be used by the PST Import service to import the PST files to user mailboxes. Each parameter name is separated by a comma. Each row under the header row represents the parameter values for importing a PST file to a specific mailbox. You need a row for each PST file that you want to import to a user mailbox. You can have a maximum of 500 rows in the CSV mapping file. To import more than 500 PST files, you'll have to create multiple mapping files and create multiple import jobs in Step 5.</span></span>

    > [!NOTE]
    > <span data-ttu-id="dac46-281">SharePoint パラメーターなど、ヘッダー行は何も変更しないでください。これらは PST インポートの処理中、無視されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-281">Don't change anything in the header row, including the SharePoint parameters; they will be ignored during the PST Import process.</span></span> <span data-ttu-id="dac46-282">また、必ずマッピング ファイル内のプレースホルダーのデータを実際のデータに置き換えてください。</span><span class="sxs-lookup"><span data-stu-id="dac46-282">Also, be sure to replace the placeholder data in the mapping file with your actual data.</span></span>

3. <span data-ttu-id="dac46-283">次の表の情報を使って、必要な情報を含む CSV ファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="dac46-283">Use the information in the following table to populate the CSV file with the required information.</span></span>

    | <span data-ttu-id="dac46-284">パラメーター</span><span class="sxs-lookup"><span data-stu-id="dac46-284">Parameter</span></span> | <span data-ttu-id="dac46-285">説明</span><span class="sxs-lookup"><span data-stu-id="dac46-285">Description</span></span> | <span data-ttu-id="dac46-286">例</span><span class="sxs-lookup"><span data-stu-id="dac46-286">Example</span></span> |
    |:-----|:-----|:-----|
    | `Workload` <br/> |<span data-ttu-id="dac46-287">データのインポート先のサービスを指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-287">Specifies the service that data will be imported to.</span></span> <span data-ttu-id="dac46-288">ユーザー メールボックスに PST ファイルをインポートするには、`Exchange` を使用します。</span><span class="sxs-lookup"><span data-stu-id="dac46-288">To import PST files to user mailboxes, use  `Exchange`.</span></span>  <br/> | `Exchange` <br/> |
    | `FilePath` <br/> |<span data-ttu-id="dac46-289">手順 2 で PST ファイルをアップロードした Azure Storage の場所でフォルダーの場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-289">Specifies the folder location in the Azure Storage location that you uploaded the PST files to in Step 2.</span></span>  <br/> <span data-ttu-id="dac46-290">手順 2 の `/Dest:` パラメーターの SAS URL にオプションのサブフォルダー名を入れなかった場合は、CSV ファイルのこのパラメーターを空白のままにしておきます。</span><span class="sxs-lookup"><span data-stu-id="dac46-290">If you didn't include an optional subfolder name in the SAS URL in the  `/Dest:` parameter in Step 2, leave this parameter blank in the CSV file.</span></span> <span data-ttu-id="dac46-291">サブフォルダー名を入れた場合は、このパラメーターでその名前を指定します (2 つ目の例を参照)。</span><span class="sxs-lookup"><span data-stu-id="dac46-291">If you included a subfolder name, specify it in this parameter (see the second example).</span></span> <span data-ttu-id="dac46-292">このパラメーターの値には、大文字と小文字の区別があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-292">The value for this parameter is case-sensitive.</span></span>  <br/> <span data-ttu-id="dac46-293">どちらの場合でも、`FilePath` パラメーターの値に "ingestiondata" を含め *ない* でください。</span><span class="sxs-lookup"><span data-stu-id="dac46-293">Either way,  *don't*  include "ingestiondata" in the value for the  `FilePath` parameter.</span></span>  <br/><br/> <span data-ttu-id="dac46-294">**重要:** 手順 2 で `/Dest:` パラメーターに SAS URL の省略可能なサブフォルダー名を含めた場合、ファイル パス名の大文字小文字はそのとき使用したものと同じである必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-294">**Important:** The case for the file path name must be the same as the case you used if you included an optional subfolder name in the SAS URL in the  `/Dest:` parameter in Step 2.</span></span> <span data-ttu-id="dac46-295">たとえば、手順 2 でサブフォルダー名として `PSTFiles` を使用した場合、CSV ファイル内の `FilePath` パラメーターに `pstfiles` を使用すると、PST ファイルのインポートは失敗します。</span><span class="sxs-lookup"><span data-stu-id="dac46-295">For example, if you used  `PSTFiles` for the subfolder name in Step 2 and then use  `pstfiles` in the  `FilePath` parameter in CSV file, the import for the PST file will fail.</span></span> <span data-ttu-id="dac46-296">必ず、両方のインスタンスの大文字と小文字を同じにしてください。</span><span class="sxs-lookup"><span data-stu-id="dac46-296">Be sure to use the same case in both instances.</span></span>  <br/> |<span data-ttu-id="dac46-297">(空白のまま)</span><span class="sxs-lookup"><span data-stu-id="dac46-297">(leave blank)</span></span>  <br/> <span data-ttu-id="dac46-298">または</span><span class="sxs-lookup"><span data-stu-id="dac46-298">Or</span></span>  <br/>  `PSTFiles` <br/> |
    | `Name` <br/> |<span data-ttu-id="dac46-299">ユーザー メールボックスにインポートする PST ファイルの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-299">Specifies the name of the PST file that will be imported to the user mailbox.</span></span> <span data-ttu-id="dac46-300">このパラメーターの値には、大文字と小文字の区別があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-300">The value for this parameter is case-sensitive.</span></span> <span data-ttu-id="dac46-301">インポート ジョブ用のマッピング ファイル内の各 PST ファイルのファイル名は一意である必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-301">The file name of each PST file in the mapping file for an import job must be unique.</span></span> <br/> <br/><span data-ttu-id="dac46-302">**重要:** CSV ファイル内の PST ファイル名の大文字と小文字は、手順 2 で Azure Storage の場所にアップロードした PST ファイルの場合と同じである必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-302">**Important:** The case for the PST file name in the CSV file must be the same as the PST file that was uploaded to the Azure Storage location in Step 2.</span></span> <span data-ttu-id="dac46-303">たとえば、CSV ファイル内の `Name` パラメーターでは `annb.pst` を使用していますが、実際の PST ファイルの名前は `AnnB.pst` である場合、その PST ファイルのインポートは失敗します。</span><span class="sxs-lookup"><span data-stu-id="dac46-303">For example, if you use  `annb.pst` in the  `Name` parameter in the CSV file, but the name of the actual PST file is `AnnB.pst`, the import for that PST file will fail.</span></span> <span data-ttu-id="dac46-304">CSV ファイル内の PST の名前の大文字小文字は、実際の PST ファイルの場合と同じである必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-304">Be sure that the name of the PST in the CSV file uses the same case as the actual PST file.</span></span>  <br/> | `annb.pst` <br/> |
    | `Mailbox` <br/> |<span data-ttu-id="dac46-305">PST ファイルのインポート先になるメールボックスのメールアドレスを指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-305">Specifies the email address of the mailbox that the PST file will be imported to.</span></span> <span data-ttu-id="dac46-306">PST インポート サービスは、PST ファイルのパブリック フォルダーへのインポートをサポートしていないため、パブリック フォルダーを指定できません。</span><span class="sxs-lookup"><span data-stu-id="dac46-306">You can't specify a public folder because the PST Import Service doesn't support importing PST files to public folders.</span></span>  <br/> <span data-ttu-id="dac46-307">PST ファイルを非アクティブなメールボックスにインポートするには、このパラメーターにメールボックスの GUID を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-307">To import a PST file to an inactive mailbox, you have to specify the mailbox GUID for this parameter.</span></span> <span data-ttu-id="dac46-308">この GUID を取得するには、Exchange Online で `Get-Mailbox <identity of inactive mailbox> -InactiveMailboxOnly | FL Guid` の PowerShell コマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="dac46-308">To obtain this GUID, run the following PowerShell command in Exchange Online:  `Get-Mailbox <identity of inactive mailbox> -InactiveMailboxOnly | FL Guid`</span></span> <br/> <br/><span data-ttu-id="dac46-309">**注意:** 1 つのメール アドレスに対して複数のメールボックスが存在することがあります。この場合、1 つのメールボックスがアクティブ状態となり、他のメールボックスは論理的に削除された (非アクティブな) 状態となります。</span><span class="sxs-lookup"><span data-stu-id="dac46-309">**Note:** Sometimes you might have multiple mailboxes with the same email address, where one mailbox is an active mailbox and the other mailbox is in a soft-deleted (or inactive) state.</span></span> <span data-ttu-id="dac46-310">このような状況で、PST ファイルのインポート先のメールボックスを一意に識別するには、メールボックスの GUID を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-310">In these situations, you have to specify the mailbox GUID to uniquely identify the mailbox to import the PST file to.</span></span> <span data-ttu-id="dac46-311">アクティブなメールボックスの GUID を取得するには、次の PowerShell コマンドを実行します: `Get-Mailbox <identity of active mailbox> | FL Guid`</span><span class="sxs-lookup"><span data-stu-id="dac46-311">To obtain this GUID for active mailboxes, run the following PowerShell command:  `Get-Mailbox <identity of active mailbox> | FL Guid`.</span></span> <span data-ttu-id="dac46-312">論理的に削除された (非アクティブな) メールボックスの GUID を取得するには、次のコマンドを実行します: `Get-Mailbox <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`</span><span class="sxs-lookup"><span data-stu-id="dac46-312">To obtain the GUID for soft-deleted (or inactive) mailboxes, run this command  `Get-Mailbox <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`.</span></span>  <br/> | `annb@contoso.onmicrosoft.com` <br/> <span data-ttu-id="dac46-313">または</span><span class="sxs-lookup"><span data-stu-id="dac46-313">Or</span></span>  <br/>  `2d7a87fe-d6a2-40cc-8aff-1ebea80d4ae7` <br/> |
    | `IsArchive` <br/> | <span data-ttu-id="dac46-p152">PST ファイルをユーザーのアーカイブ メールボックスにインポートするかどうかを指定します。次のような 2 つの選択肢があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-p152">Specifies whether to import the PST file to the user's archive mailbox. There are two options:  </span></span><br/><br/><span data-ttu-id="dac46-316">**FALSE:** PST ファイルをユーザーのプライマリ メールボックスにインポートします。</span><span class="sxs-lookup"><span data-stu-id="dac46-316">**FALSE:** Imports the PST file to the user's primary mailbox.</span></span>  <br/> <span data-ttu-id="dac46-317">**TRUE:** PST ファイルをユーザーのアーカイブ メールボックスにインポートします。</span><span class="sxs-lookup"><span data-stu-id="dac46-317">**TRUE:** Imports the PST file to the user's archive mailbox.</span></span> <span data-ttu-id="dac46-318">これは、[ユーザーのアーカイブ メールボックスが有効である](enable-archive-mailboxes.md)ことが前提です。</span><span class="sxs-lookup"><span data-stu-id="dac46-318">This assumes that the [user's archive mailbox is enabled](enable-archive-mailboxes.md).</span></span> <br/><br/><span data-ttu-id="dac46-319">このパラメーターが `TRUE` に設定されている場合に、ユーザーのアーカイブ メールボックスが有効になっていない場合は、そのユーザーのインポートは失敗します。</span><span class="sxs-lookup"><span data-stu-id="dac46-319">If you set this parameter to  `TRUE` and the user's archive mailbox isn't enabled, the import for that user will fail.</span></span> <span data-ttu-id="dac46-320">アーカイブが有効化されていないにもかかわらずこのプロパティが `TRUE` に設定されたことが原因で、あるユーザーのインポートが失敗しても、そのインポート ジョブ内の他のユーザーが影響を受けることはありません。</span><span class="sxs-lookup"><span data-stu-id="dac46-320">If an import fails for one user (because their archive isn't enabled and this property is set to  `TRUE`), the other users in the import job won't be affected.</span></span>  <br/>  <span data-ttu-id="dac46-321">このパラメーターを空白のままにすると、PST ファイルはユーザーのプライマリ メールボックスにインポートされます。</span><span class="sxs-lookup"><span data-stu-id="dac46-321">If you leave this parameter blank, the PST file is imported to the user's primary mailbox.</span></span>  <br/> <br/><span data-ttu-id="dac46-322">**注:** PST ファイルをクラウド ベースのアーカイブ メールボックスにインポートするときに、そのユーザーのプライマリ メールボックスがオンプレミスの場合は、このパラメーターに対して `TRUE` を指定し、そのユーザーのオンプレミスのメールボックスのメール アドレスを `Mailbox` パラメーターで指定してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-322">**Note:** To import a PST file to a cloud-based archive mailbox for a user whose primary mailbox is on-premises, just specify  `TRUE` for this parameter and specify the email address for the user's on-premises mailbox for the  `Mailbox` parameter.</span></span>  <br/> | `FALSE` <br/> <span data-ttu-id="dac46-323">または</span><span class="sxs-lookup"><span data-stu-id="dac46-323">Or</span></span>  <br/>  `TRUE` <br/> |
    | `TargetRootFolder` <br/> | <span data-ttu-id="dac46-324">PST ファイルのインポート先のメールボックス フォルダーを指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-324">Specifies the mailbox folder that the PST file is imported to.</span></span>  <br/> <br/> <span data-ttu-id="dac46-325">このパラメーターを空白のままにすると、PST ファイルはメールボックスのルート レベル (受信トレイ フォルダーや他の既定のメールボックス フォルダーと同じレベル) で **インポート済み** という新しいフォルダーにインポートされます。</span><span class="sxs-lookup"><span data-stu-id="dac46-325">If you leave this parameter blank, the PST file will be imported to a new folder named **Imported** at the root level of the mailbox (the same level as the Inbox folder and the other default mailbox folders).</span></span>  <br/> <br/> <span data-ttu-id="dac46-326">`/` を指定する場合、対象のメールボックスまたはアーカイブのフォルダー構造の最上位に、PST ファイルのフォルダーとアイテムが復元されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-326">If you specify  `/`, the folders and items in the PST file are imported to the top of the folder structure in the target mailbox or archive.</span></span> <span data-ttu-id="dac46-327">対象のメールボックスにフォルダー (たとえば、[受信トレイ]、[送信済みアイテム]、[削除済みアイテム] などの既定のフォルダー) がある場合、PST 内のそのフォルダーのアイテムは、対象のメールボックスの既存のフォルダーに結合されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-327">If a folder exists in the target mailbox (for example, default folders such as Inbox, Sent Items, and Deleted Items), the items in that folder in the PST are merged into the existing folder in the target mailbox.</span></span> <span data-ttu-id="dac46-328">たとえば、PST ファイルに [受信トレイ] フォルダーが含まれている場合、そのフォルダー内のアイテムは対象のメールボックスの [受信トレイ] フォルダーにインポートされます。</span><span class="sxs-lookup"><span data-stu-id="dac46-328">For example, if the PST file contains an Inbox folder, items in that folder are imported to the Inbox folder in the target mailbox.</span></span> <span data-ttu-id="dac46-329">新しいフォルダーは、対象のメールボックスのフォルダー構造にない場合に作成されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-329">New folders are created if they don't exist in the folder structure for the target mailbox.</span></span>  <br/><br/>  <span data-ttu-id="dac46-330">`/<foldername>` を指定した場合、PST ファイルのアイテムとフォルダーは *\<foldername\>* というフォルダーにインポートされます。</span><span class="sxs-lookup"><span data-stu-id="dac46-330">If you specify  `/<foldername>`, items and folders in the PST file are imported to a folder named  *\<foldername\>*  .</span></span> <span data-ttu-id="dac46-331">たとえば、`/ImportedPst` を使用した場合、アイテムは **ImportedPst** というフォルダーにインポートされます。</span><span class="sxs-lookup"><span data-stu-id="dac46-331">For example, if you use  `/ImportedPst`, items would be imported to a folder named **ImportedPst**.</span></span> <span data-ttu-id="dac46-332">このフォルダーは、ユーザーのメールボックスの受信トレイ フォルダーと同じレベルにあります。</span><span class="sxs-lookup"><span data-stu-id="dac46-332">This folder will be located in the user's mailbox at the same level as the Inbox folder.</span></span>  <br/><br/> <span data-ttu-id="dac46-333">**ヒント:** PST ファイルのインポート先に最適なフォルダーの場所を決定できるよう、このパラメーターを試すテスト バッチをいくつか実行することを検討してください。 </span><span class="sxs-lookup"><span data-stu-id="dac46-333">**Tip:** Consider running a few test batches to experiment with this parameter so you can determine the best folder location to import PSTs files to.</span></span>  <br/> |<span data-ttu-id="dac46-334">(空白)</span><span class="sxs-lookup"><span data-stu-id="dac46-334">(leave blank)</span></span>  <br/> <span data-ttu-id="dac46-335">または</span><span class="sxs-lookup"><span data-stu-id="dac46-335">Or</span></span>  <br/>  `/` <br/> <span data-ttu-id="dac46-336">または</span><span class="sxs-lookup"><span data-stu-id="dac46-336">Or</span></span>  <br/>  `/ImportedPst` <br/> |
    | `ContentCodePage` <br/> |<span data-ttu-id="dac46-337">この省略可能なパラメーターでは、PST ファイルを ANSI ファイル形式でインポートする場合に使用するコード ページの数値を指定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-337">This optional parameter specifies a numeric value for the code page to use for importing PST files in the ANSI file format.</span></span> <span data-ttu-id="dac46-338">このパラメーターは、中国語、日本語、韓国語 (CJK) を使用する組織から PST ファイルをインポートする場合に使用します。通常、これらの言語は、文字エンコードのために 2 バイト文字セット (DBCS) を使用するからです。</span><span class="sxs-lookup"><span data-stu-id="dac46-338">This parameter is used for importing PST files from Chinese, Japanese, and Korean (CJK) organizations because these languages typically use a double byte character set (DBCS) for character encoding.</span></span> <span data-ttu-id="dac46-339">メールボックス フォルダー名に DBCS が使用されている言語については、PST ファイルのインポートの際にこのパラメーターを使用しないと、多くの場合、インポート後にフォルダー名の文字化けが発生します。</span><span class="sxs-lookup"><span data-stu-id="dac46-339">If this parameter isn't used to import PST files for languages that use DBCS for mailbox folder names, the folder names are often garbled after they're imported.</span></span>  <br/><br/> <span data-ttu-id="dac46-340">このパラメーターに使用できる値のリストについては、「[Code Page Identifiers](/windows/win32/intl/code-page-identifiers)」 (コード ページ識別子) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-340">For a list of supported values to use for this parameter, see [Code Page Identifiers](/windows/win32/intl/code-page-identifiers).</span></span>  <br/> <br/><span data-ttu-id="dac46-341">**注:** 前述したように、これは省略可能なパラメーターであり、CSV ファイルに含めなくてもかまいません。</span><span class="sxs-lookup"><span data-stu-id="dac46-341">**Note:** As previously stated, this is an optional parameter and you don't have to include it in the CSV file.</span></span> <span data-ttu-id="dac46-342">または、このパラメーターを含め、1 つまたは複数の行について値を空白のままにしておくこともできます。</span><span class="sxs-lookup"><span data-stu-id="dac46-342">Or you can include it and leave the value blank for one or more rows.</span></span>  <br/> |<span data-ttu-id="dac46-343">(空白のまま)</span><span class="sxs-lookup"><span data-stu-id="dac46-343">(leave blank)</span></span>  <br/> <span data-ttu-id="dac46-344">または</span><span class="sxs-lookup"><span data-stu-id="dac46-344">Or</span></span>  <br/>  <span data-ttu-id="dac46-345">`932` (ANSI/OEM 日本語のコード ページ ID)</span><span class="sxs-lookup"><span data-stu-id="dac46-345">`932` (which is the code page identifier for ANSI/OEM Japanese)</span></span>  <br/> |
    | `SPFileContainer` <br/> |<span data-ttu-id="dac46-346">PST インポートの場合は、このパラメーターを空白のままにします。</span><span class="sxs-lookup"><span data-stu-id="dac46-346">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="dac46-347">該当なし</span><span class="sxs-lookup"><span data-stu-id="dac46-347">Not applicable</span></span>  <br/> |
    | `SPManifestContainer` <br/> |<span data-ttu-id="dac46-348">PST インポートの場合は、このパラメーターを空白のままにします。</span><span class="sxs-lookup"><span data-stu-id="dac46-348">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="dac46-349">該当なし</span><span class="sxs-lookup"><span data-stu-id="dac46-349">Not applicable</span></span>  <br/> |
    | `SPSiteUrl` <br/> |<span data-ttu-id="dac46-350">PST インポートの場合は、このパラメーターを空白のままにします。</span><span class="sxs-lookup"><span data-stu-id="dac46-350">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="dac46-351">該当なし</span><span class="sxs-lookup"><span data-stu-id="dac46-351">Not applicable</span></span>  <br/> |

## <a name="step-5-create-a-pst-import-job"></a><span data-ttu-id="dac46-352">手順 5: PST インポート ジョブを作成する</span><span class="sxs-lookup"><span data-stu-id="dac46-352">Step 5: Create a PST Import job</span></span>

<span data-ttu-id="dac46-353">次の手順では、Microsoft 365 のインポート サービスで PST インポート ジョブを作成します。</span><span class="sxs-lookup"><span data-stu-id="dac46-353">The next step is to create the PST Import job in the Import service in Microsoft 365.</span></span> <span data-ttu-id="dac46-354">前述したように、手順 4 で作成した PST インポートのマッピング ファイルを送信します。</span><span class="sxs-lookup"><span data-stu-id="dac46-354">As previously explained, you submit the PST Import mapping file that you created in Step 4.</span></span> <span data-ttu-id="dac46-355">ジョブを作成した後に、Microsoft 365 は PST ファイル内のデータを分析し、実際に PST インポート マッピング ファイル ([手順 6](#step-6-filter-data-and-start-the-pst-import-job) を参照) で指定したメールボックスにインポートするデータをフィルター処理する機会を提供します。</span><span class="sxs-lookup"><span data-stu-id="dac46-355">After you create the job, Microsoft 365 analyzes the data in the PST files and then gives you an opportunity to filter the data that actually gets imported to the mailboxes specified in the PST import mapping file (see [Step 6](#step-6-filter-data-and-start-the-pst-import-job)).</span></span>
  
1. <span data-ttu-id="dac46-356"><https://compliance.microsoft.com> に移動し、組織の管理者アカウントの資格情報を使用してサインインします。</span><span class="sxs-lookup"><span data-stu-id="dac46-356">Go to <https://compliance.microsoft.com> and sign in using the credentials for an administrator account in your organization.</span></span>

2. <span data-ttu-id="dac46-357">Microsoft 365 コンプライアンス センターの左のウィンドウで、[**情報ガバナンス] > [インポート**] の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-357">In the left pane of the Microsoft 365 compliance center, click **Information governance > Import**.</span></span>

3. <span data-ttu-id="dac46-358">[**インポート**] タブで、[![追加アイコン](../media/ITPro-EAC-AddIcon.gif)] > [**新規インポート ジョブ**] の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-358">On the **Import** tab, click ![Add Icon](../media/ITPro-EAC-AddIcon.gif) **New import job**.</span></span>

   > [!NOTE]
   > <span data-ttu-id="dac46-359">Microsoft 365 コンプライアンス センターの [**インポート**] ページにアクセスしてインポート ジョブを作成するには、適切なアクセス許可の割り当てが必要です。</span><span class="sxs-lookup"><span data-stu-id="dac46-359">You have to be assigned the appropriate permissions to access the **Import** page in the Microsoft 365 compliance center to create an import job.</span></span> <span data-ttu-id="dac46-360">詳細については、「**はじめに**」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-360">See the **Before you begin** section for more information.</span></span> 

4. <span data-ttu-id="dac46-361">PST インポート ジョブの名前を入力し、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-361">Type a name for the PST import job, and then click **Next**.</span></span> <span data-ttu-id="dac46-362">小文字の英字、数字、ハイフン、およびアンダー スコアを使用します。</span><span class="sxs-lookup"><span data-stu-id="dac46-362">Use lowercase letters, numbers, hyphens, and underscores.</span></span> <span data-ttu-id="dac46-363">大文字を使用したり、名前にスペースを含めたりすることはできません。</span><span class="sxs-lookup"><span data-stu-id="dac46-363">You can't use uppercase letters or include spaces in the name.</span></span>

5. <span data-ttu-id="dac46-364">[**データをアップロードまたは配送しますか?**] ページで、[**データをアップロードする**] をクリックし、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-364">On the **Do you want to upload or ship data?** page, click **Upload your data** and then click **Next**.</span></span>
  
6. <span data-ttu-id="dac46-365">手順 4 の [**データのインポート**] ページで、[**ファイルをアップロードしました**] と [**マッピング ファイルにアクセスできます**] チェック ボックスを選択して、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-365">In step 4 on the **Import data** page, click the **I'm done uploading my files** and **I have access to the mapping file** check boxes, and then click **Next**.</span></span>

    ![手順 4 で 2 つのチェック ボックスをクリックする](../media/9f2427e8-3af2-4e27-95e6-a9f08430d3d8.png)
  
7. <span data-ttu-id="dac46-367">[**マッピング ファイルの選択**] ページで、[**マッピング ファイルの選択**] をクリックし、手順 4 で作成した CSV マッピング ファイルを送信します。</span><span class="sxs-lookup"><span data-stu-id="dac46-367">On the **Select the mapping file** page, click **Select mapping file** to submit the CSV mapping file that you created in Step 4.</span></span>

    ![[マッピング ファイルの選択] をクリックして、インポート ジョブのために作成した CSV ファイルを送信する](../media/d30b1d73-80bb-491e-a642-a21673d06889.png)
  
8. <span data-ttu-id="dac46-369">CSV ファイルの名前が [**マッピング ファイル名**] に表示されたら、[**検証**] をクリックし、CSV ファイルでエラーを確認します。</span><span class="sxs-lookup"><span data-stu-id="dac46-369">After the name of the CSV file appears under **Mapping file name**, click **Validate** to check your CSV file for errors.</span></span>

    ![[検証] をクリックして CSV ファイルでエラーを確認する](../media/4680999d-5538-4059-b878-2736a5445037.png)
  
    <span data-ttu-id="dac46-371">PST インポート ジョブを作成するには、CSV ファイルが正常に検証される必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-371">The CSV file has to be successfully validated to create a PST Import job.</span></span> <span data-ttu-id="dac46-372">正常に検証されると、ファイル名が緑色に変わります。</span><span class="sxs-lookup"><span data-stu-id="dac46-372">The file name is changed to green after it's successfully validated.</span></span> <span data-ttu-id="dac46-373">検証が失敗した場合は、[**ログの表示**] リンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-373">If the validation fails, click the **View log** link.</span></span> <span data-ttu-id="dac46-374">検証エラー レポートを開くと、失敗したファイルの各行にエラー メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-374">A validation error report is opened, with an error message for each row in the file that failed.</span></span>

   > [!NOTE]
   > <span data-ttu-id="dac46-375">上で説明したように、CSV マッピング ファイルに含めることができる最大行数は 500 行です。</span><span class="sxs-lookup"><span data-stu-id="dac46-375">As previously explained, a mapping file can have a maximum of 500 rows.</span></span> <span data-ttu-id="dac46-376">マッピング ファイルに 500 行を超える行が含まれる場合、検証は失敗します。</span><span class="sxs-lookup"><span data-stu-id="dac46-376">Validation will fail if the mapping file contains more than 500 rows.</span></span> <span data-ttu-id="dac46-377">500 個を超える PST ファイルをインポートするには、複数のマッピング ファイルを作成して複数のインポート ジョブを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-377">To import more than 500 PST files, you'll have to create multiple mapping files and multiple import jobs.</span></span>

9. <span data-ttu-id="dac46-378">マッピング ファイルが正常に検証された後に、利用条件のドキュメントを読み、チェックボックスをクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-378">After the mapping file is successfully validated, read the terms and conditions document, and then click the checkbox.</span></span>

10. <span data-ttu-id="dac46-379">[**保存**] をクリックしてジョブを送信し、ジョブが正常に作成されたら [**閉じる**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-379">Click **Save** to submit the job, and then click **Close** after the job is successfully created.</span></span>

    <span data-ttu-id="dac46-380">[**分析の進行中**] のステータスを示すステータス用のポップアップ ページが表示され、新しいインポート ジョブが [**PST ファイルのインポート**] ページのリストに表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-380">A status flyout page is displayed, with a status of **Analysis in progress** and the new import job is displayed in the list on the **Import PST files** page.</span></span>

11. <span data-ttu-id="dac46-381">[**更新**] ![更新アイコン](../media/O365-MDM-Policy-RefreshIcon.gif) をクリックして、[**ステータス**] 列に表示されるステータス情報を更新します。</span><span class="sxs-lookup"><span data-stu-id="dac46-381">Click **Refresh** ![Refresh icon](../media/O365-MDM-Policy-RefreshIcon.gif) to update the status information that's displayed in the **Status** column.</span></span> <span data-ttu-id="dac46-382">分析が完了し、データをインポートする準備ができると、ステータスが [**分析完了**] に変わります。</span><span class="sxs-lookup"><span data-stu-id="dac46-382">When the analysis is complete and the data is ready to be imported, the status is changed to **Analysis completed**.</span></span>

    <span data-ttu-id="dac46-383">インポート ジョブをクリックしてステータス フライアウト ページを表示することができます。このページにはマッピング ファイルにリストされている各 PST ファイルのステータスなどのインポート ジョブに関する詳細が表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-383">You can click the import job to display the status flyout page, which contains more detailed information about the import job such as the status of each PST file listed in the mapping file.</span></span>

## <a name="step-6-filter-data-and-start-the-pst-import-job"></a><span data-ttu-id="dac46-384">手順 6: データをフィルター処理して、PST インポート ジョブを開始する</span><span class="sxs-lookup"><span data-stu-id="dac46-384">Step 6: Filter data and start the PST Import job</span></span>

<span data-ttu-id="dac46-385">手順 5 でインポート ジョブを作成した後、Microsoft 365 は、セキュリティで保護された安全な方法で PST ファイル内のデータを分析します。具体的には、アイテムの経過時間と、PST ファイルに含まれるさまざまなメッセージの種類を識別します。</span><span class="sxs-lookup"><span data-stu-id="dac46-385">After you create the import job in Step 5, Microsoft 365 analyzes the data in the PST files (in a safe and secure manner) by identifying the age of the items and the different message types included in the PST files.</span></span> <span data-ttu-id="dac46-386">分析が完了し、データをインポートする準備ができたら、PST ファイルに含まれるすべてのデータをインポートするか、インポートするデータをトリミングするかを選ぶことができます。データをトリミングする場合は、インポートするデータを制御するフィルターを設定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-386">When the analysis is completed and the data is ready to import, you have the option to import all the data contained in the PST files or you can trim the data that's imported by setting filters that control what data gets imported.</span></span>
  
1. <span data-ttu-id="dac46-387">Microsoft 365 コンプライアンス センターの [**インポート**] タブで、手順 5 で作成したインポート ジョブを選択し、[**Office 365 にインポート**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-387">On the **Import** tab in the Microsoft 365 compliance center, select the import jobs that you created in Step 5 and then click **Import to Office 365**.</span></span>
  
   <span data-ttu-id="dac46-388">[**データのフィルター処理**] ページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-388">The **Filter your data** page is displayed.</span></span> <span data-ttu-id="dac46-389">ここには、データの使用期間に関する情報など、Office 365 によって実行された PST ファイルの分析の結果のデータ情報が含まれます。</span><span class="sxs-lookup"><span data-stu-id="dac46-389">It contains the data insights resulting from the analysis performed on the PST files by Office 365, including information about the age of the data.</span></span> <span data-ttu-id="dac46-390">この時点で、インポートされるデータにフィルター処理を適用するか、すべてのデータをそのままインポートするかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-390">At this point, you have the option to filter the data that will be imported or import all the data as is.</span></span> 

    ![PST ファイルのデータをトリミングしたり、そのすべてをインポートしたりすることができる](../media/287fc030-99e9-417b-ace7-f64617ea5d4e.png)
  
2. <span data-ttu-id="dac46-392">次のいずれかの操作を行います。</span><span class="sxs-lookup"><span data-stu-id="dac46-392">Do one of the following:</span></span>

   1. <span data-ttu-id="dac46-393">インポートするデータをトリミングする場合は [**はい、インポートする前にフィルター処理します**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-393">To trim the data that you import, click **Yes, I want to filter it before importing**.</span></span>

      <span data-ttu-id="dac46-394">PST ファイル内のデータをフィルター処理してインポート ジョブを開始する手順の詳細については、「[Office 365 に PST ファイルをインポートするときにデータをフィルター処理する](filter-data-when-importing-pst-files.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-394">For detailed step-by-step instructions about filtering the data in the PST files and then starting the import job, see [Filter data when importing PST files to Office 365](filter-data-when-importing-pst-files.md).</span></span>

      <span data-ttu-id="dac46-395">または</span><span class="sxs-lookup"><span data-stu-id="dac46-395">Or</span></span>

   2. <span data-ttu-id="dac46-396"> PST ファイル内のすべてのデータをインポートするには、[**いいえ、すべてのアイテムをインポートします**] をクリックして、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="dac46-396">To import all data in the PST files, click **No, I want to import everything,** and click **Next**.</span></span>

3. <span data-ttu-id="dac46-397">すべてのデータをインポートする場合は、[**データのインポート**] をクリックしてインポート ジョブを開始します。</span><span class="sxs-lookup"><span data-stu-id="dac46-397">If you chose to import all the data, click **Import data** to start the import job.</span></span> 

   <span data-ttu-id="dac46-398">インポート ジョブのステータスが [**PST ファイルのインポート**] ページに表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-398">The status of the import job is display on the **Import PST files** page.</span></span> <span data-ttu-id="dac46-399">![更新アイコン](../media/O365-MDM-Policy-RefreshIcon.gif) [**更新**] をクリックして、[**ステータス**] 列に表示されるステータス情報を更新します。</span><span class="sxs-lookup"><span data-stu-id="dac46-399">Click ![Refresh icon](../media/O365-MDM-Policy-RefreshIcon.gif) **Refresh** to update the status information that's displayed in the **Status** column.</span></span> <span data-ttu-id="dac46-400">インポート ジョブをクリックするとステータス フライアウト ページが表示され、インポートされている各 PST ファイルに関するステータス情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-400">Click the import job to display the status flyout page, which displays status information about each PST file being imported.</span></span>

## <a name="more-information"></a><span data-ttu-id="dac46-401">詳細情報</span><span class="sxs-lookup"><span data-stu-id="dac46-401">More information</span></span>

- <span data-ttu-id="dac46-402">Microsoft 365 に PST ファイルをインポートするのはなぜですか?</span><span class="sxs-lookup"><span data-stu-id="dac46-402">Why import PST files to Microsoft 365?</span></span>

  - <span data-ttu-id="dac46-403">組織のアーカイブ メッセージング データを Microsoft 365 にインポートする方法として役立つからです。</span><span class="sxs-lookup"><span data-stu-id="dac46-403">It's a good way to import your organization's archival messaging data to Microsoft 365.</span></span>

  - <span data-ttu-id="dac46-404">データがクラウドに格納されるので、ユーザーはあらゆるデバイスからデータを利用できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-404">The data is available to the user from all devices because it's stored in the cloud.</span></span>

  - <span data-ttu-id="dac46-p168">この機能は、インポートした PST ファイルのデータに Microsoft 365 のコンプライアンス機能を適用することで、組織のコンプライアンスのニーズに対応するのに役立ちます。対象は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="dac46-p168">It helps address compliance needs of your organization by letting you apply Microsoft 365 compliance features to the data from the PST files that you imported. This includes:</span></span>

  - <span data-ttu-id="dac46-407">[アーカイブ メールボックス](enable-archive-mailboxes.md)と[自動拡張アーカイブ](enable-unlimited-archiving.md)を有効にして、インポートしたデータを保存するための追加のメールボックス記憶域をユーザーに与える。</span><span class="sxs-lookup"><span data-stu-id="dac46-407">Enabling [archive mailboxes](enable-archive-mailboxes.md) and [auto-expanding archiving](enable-unlimited-archiving.md) to give users additional mailbox storage space to store the data that you imported.</span></span>

  - <span data-ttu-id="dac46-408">メールボックスを[訴訟ホールド](./create-a-litigation-hold.md)に配置して、インポートしたデータを保持する。</span><span class="sxs-lookup"><span data-stu-id="dac46-408">Placing mailboxes on [Litigation Hold](./create-a-litigation-hold.md) to retain the data that you imported.</span></span>

  - <span data-ttu-id="dac46-409">Microsoft [電子情報開示ツール](search-for-content.md)を使用して、インポートしたデータを検索する。</span><span class="sxs-lookup"><span data-stu-id="dac46-409">Using Microsoft [eDiscovery tools](search-for-content.md) to search the data that you imported.</span></span>

  - <span data-ttu-id="dac46-410">[Microsoft 365 アイテム保持ポリシー](retention.md)を使用して、インポートしたデータの保持期間、および保持期間の経過後に実行するアクションを制御する。</span><span class="sxs-lookup"><span data-stu-id="dac46-410">Using [Microsoft 365 retention policies](retention.md) to control how long the data that you imported will be retained, and what action to take after the retention period expires.</span></span>

  - <span data-ttu-id="dac46-411">インポートしたデータに影響を与えるメールボックス関連イベントを、[監査ログ](search-the-audit-log-in-security-and-compliance.md)で検索する。</span><span class="sxs-lookup"><span data-stu-id="dac46-411">Searching the [audit log](search-the-audit-log-in-security-and-compliance.md) for mailbox-related events that affect the data that you imported.</span></span>

  - <span data-ttu-id="dac46-412">データを[非アクティブなメールボックス](create-and-manage-inactive-mailboxes.md)にインポートして、コンプライアンスのためにデータをアーカイブする。</span><span class="sxs-lookup"><span data-stu-id="dac46-412">Importing data to [inactive mailboxes](create-and-manage-inactive-mailboxes.md) to archive data for compliance purposes.</span></span> 

  - <span data-ttu-id="dac46-413">[データ損失防止ポリシー](dlp-learn-about-dlp.md)を使用して、機密データが組織外に漏洩するのを防ぐ。</span><span class="sxs-lookup"><span data-stu-id="dac46-413">Using [data loss prevention policies](dlp-learn-about-dlp.md) to prevent sensitive data from leaking outside your organization.</span></span>
  
- <span data-ttu-id="dac46-p169">手順 1 で取得する Shared Access Signature (SAS) URL の例を示します。この例には、PST ファイルをアップロードするために AzCopy.exe ツールで実行するコマンドの構文も含まれています。パスワードや他のセキュリティ関連の情報を保護するのと同じように、SAS URL を保護する予防措置を講じる必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-p169">Here's an example of the Shared Access Signature (SAS) URL that's obtained in Step 1. This example also contains the syntax for the command that you run in the AzCopy.exe tool to upload PST files. Be sure to take precautions to protect the SAS URL just like you would protect passwords or other security-related information.</span></span>

    ```console
    SAS URL: https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D

    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y

    EXAMPLES

    This example uploads PST files to the root of the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
    
    This example uploads PST files to a subfolder named PSTFiles  in the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
    ```

- <span data-ttu-id="dac46-417">前述したように、Office 365 インポート サービスは PST ファイルがメールボックスにインポートされた後、アイテム保持ホールド設定を (無期限に) オンにします。</span><span class="sxs-lookup"><span data-stu-id="dac46-417">As previously explained, the Office 365 Import service turns on the retention hold setting (for an indefinite duration) after PST files are imported to a mailbox.</span></span> <span data-ttu-id="dac46-418">これは、*RetentionHoldEnabled* プロパティが **True** に設定されているため、メールボックスに割り当てられたアイテム保持ポリシーが処理されないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="dac46-418">This means the  *RetentionHoldEnabled*  property is set to  **True** so that the retention policy assigned to the mailbox won't be processed.</span></span> <span data-ttu-id="dac46-419">これによりメールボックスの所有者は、古くなったメッセージが削除ポリシーまたはアーカイブ ポリシーによって削除またはアーカイブされるのを回避し、新たにインポートしたメッセージを管理する時間を確保できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-419">This gives the mailbox owner time to manage the newly imported messages by preventing a deletion or archive policy from deleting or archiving older messages.</span></span> <span data-ttu-id="dac46-420">このアイテム保持ホールドを管理するための手順を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="dac46-420">Here are some steps you can take to manage this retention hold:</span></span>

   - <span data-ttu-id="dac46-421">一定時間後、**Set-Mailbox -RetentionHoldEnabled $false** コマンドを実行することによりアイテム保持ホールドをオフにできます。</span><span class="sxs-lookup"><span data-stu-id="dac46-421">After a certain time, you can turn off the retention hold by running the **Set-Mailbox -RetentionHoldEnabled $false** command.</span></span> <span data-ttu-id="dac46-422">手順については、「[メールボックスの保存機能を有効にする](/exchange/security-and-compliance/messaging-records-management/mailbox-retention-hold)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-422">For instructions, see [Place a mailbox on retention hold](/exchange/security-and-compliance/messaging-records-management/mailbox-retention-hold).</span></span>

   - <span data-ttu-id="dac46-423">将来の特定の日付にオフになるようにアイテム保持ホールドを構成することができます。</span><span class="sxs-lookup"><span data-stu-id="dac46-423">You can configure the retention hold so that it's turned off on some date in the future.</span></span> <span data-ttu-id="dac46-424">これを行うには、**Set-Mailbox -EndDateForRetentionHold *date*** コマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="dac46-424">You do this by running the **Set-Mailbox -EndDateForRetentionHold *date*** command.</span></span> <span data-ttu-id="dac46-425">たとえば、今日の日付が 2016 年 6 月 1 日であり、30 日後にアイテム保持ホールドをオフにする場合は、コマンド **Set-Mailbox -EndDateForRetentionHold 7/1/2016** を実行します。</span><span class="sxs-lookup"><span data-stu-id="dac46-425">For example, assuming that today's date is June 1, 2016 and you want the retention hold turned off in 30 days, you would run the following command:  **Set-Mailbox -EndDateForRetentionHold 7/1/2016**.</span></span> <span data-ttu-id="dac46-426">このシナリオでは、**RentionHoldEnabled** プロパティを *True* に設定したままにします。</span><span class="sxs-lookup"><span data-stu-id="dac46-426">In this scenario, you would leave the  **RetentionHoldEnabled**  property set to  *True*.</span></span> <span data-ttu-id="dac46-427">詳細については、「[Set-Mailbox](/powershell/module/exchange/set-mailbox)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-427">For more information, see [Set-Mailbox](/powershell/module/exchange/set-mailbox).</span></span>

   - <span data-ttu-id="dac46-428">メールボックスに割り当てられているアイテム保持ポリシーの設定を変更して、インポート済みの古いアイテムがすぐに削除されたり、ユーザーのアーカイブ メールボックスに移動されたりしないようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="dac46-428">You can change the settings for the retention policy that's assigned to the mailbox so that older items that were imported won't be immediately deleted or moved to the user's archive mailbox.</span></span> <span data-ttu-id="dac46-429">たとえば、メールボックスに割り当てられた削除ポリシーまたはアーカイブ ポリシーの保持期間を長くすることができます。</span><span class="sxs-lookup"><span data-stu-id="dac46-429">For example, you could lengthen the retention age for a deletion or archive policy that's assigned to the mailbox.</span></span> <span data-ttu-id="dac46-430">このシナリオでは、アイテム保持ポリシーの設定を変更した後で、メールボックスに対するアイテム保持ホールドをオフにします。</span><span class="sxs-lookup"><span data-stu-id="dac46-430">In this scenario, you would turn off the retention hold on the mailbox after you changed the settings of the retention policy.</span></span> <span data-ttu-id="dac46-431">詳細については、「[組織のメールボックスのアーカイブと削除ポリシーを設定する](set-up-an-archive-and-deletion-policy-for-mailboxes.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-431">For more information, see [Set up an archive and deletion policy for mailboxes in your organization](set-up-an-archive-and-deletion-policy-for-mailboxes.md).</span></span>

### <a name="how-the-import-process-works"></a><span data-ttu-id="dac46-432">インポート プロセスの流れ</span><span class="sxs-lookup"><span data-stu-id="dac46-432">How the import process works</span></span>
  
<span data-ttu-id="dac46-433">ネットワークのアップロード オプションおよび Office 365 のインポート サービスを使用して、ユーザーのメールボックスに PST ファイルを一括インポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="dac46-433">You can use the network upload option and the Office 365 Import service to bulk-import PST files to user mailboxes.</span></span> <span data-ttu-id="dac46-434">ネットワーク アップロードとは、Microsoft クラウドの一時的な記憶域に PST ファイルをアップロードすることを意味します。</span><span class="sxs-lookup"><span data-stu-id="dac46-434">Network upload means that you upload the PST files a temporary storage area in the Microsoft cloud.</span></span> <span data-ttu-id="dac46-435">その後、Office 365 インポート サービスが記憶域からユーザーのメールボックスに PST ファイルをコピーします。</span><span class="sxs-lookup"><span data-stu-id="dac46-435">Then the Office 365 Import service copies the PST files from the storage area to the target user mailboxes.</span></span>
  
<span data-ttu-id="dac46-436">ここでは、PST ファイルを Office 365 のメールボックスにインポートするためのネットワーク アップロード処理の図と説明を示します。</span><span class="sxs-lookup"><span data-stu-id="dac46-436">Here's an illustration and description of the network upload process to import PST files to mailboxes in Office 365.</span></span>
  
![PST ファイルを Office 365 にインポートするためのネットワーク アップロード プロセスのワークフロー](../media/9e05a19e-1e7a-4f1f-82df-9118f51588c4.png)
  
1. <span data-ttu-id="dac46-438">**PST インポート ツールとキーを Azure Storage のプライベートな場所にダウンロードする:** まず、PST ファイルを Microsoft クラウドの Azure Storage の場所にアップロードするために使用する AzCopy コマンドライン ツールとアクセス キーをダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="dac46-438">**Download the PST import tool and key to private Azure Storage location:** The first step is to download the AzCopy command-line tool and an access key used to upload the PST files to an Azure Storage location in the Microsoft cloud.</span></span> <span data-ttu-id="dac46-439">これらは、Microsoft 365 コンプライアンス センター の [**インポート**] ページで取得します。</span><span class="sxs-lookup"><span data-stu-id="dac46-439">You obtain these from the **Import** page in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="dac46-440">このキー (Secure Access Signature (SAS) キーと呼ばれます) は、ユーザーに、PST ファイルをプライベートのセキュリティで保護された Azure Storage の場所にアップロードするために必要なアクセス許可を提供します。</span><span class="sxs-lookup"><span data-stu-id="dac46-440">The key (called a secure access signature (SAS) key, provides you with the necessary permissions to upload PST files to a private and secure Azure Storage location.</span></span> <span data-ttu-id="dac46-441">このアクセス キーは組織に固有のもので、PST ファイルを Microsoft クラウドにアップロードした後に、PST ファイルへの不正アクセスから保護するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="dac46-441">This access key is unique to your organization and helps prevent unauthorized access to your PST files after they're uploaded to the Microsoft cloud.</span></span> <span data-ttu-id="dac46-442">PST ファイルをインポートするために、組織が別個の Azure サブスクリプションを持つ必要はありません。</span><span class="sxs-lookup"><span data-stu-id="dac46-442">Importing PST files doesn't require your organization to have a separate Azure subscription.</span></span> 

2. <span data-ttu-id="dac46-443">**Azure Storage の場所に PST ファイルをアップロードする**: 次の手順は、AzCopy.exe ツール (手順 1 でダウンロード) を使用して、組織が所在する場所と同じ地域の Microsoft データ センターに置かれている Azure Storage の場所に PST ファイルをアップロードして保存することです。</span><span class="sxs-lookup"><span data-stu-id="dac46-443">**Upload the PST files to the Azure Storage location:** The next step is to use the AzCopy.exe tool (downloaded in step 1) to upload and store your PST files in an Azure Storage location that resides in the same regional Microsoft datacenter where your organization is located.</span></span> <span data-ttu-id="dac46-444">PST ファイルをアップロードするには、インポートするファイルが組織のファイル共有またはファイル サーバー上にある必要があります。</span><span class="sxs-lookup"><span data-stu-id="dac46-444">To upload them, the PST files that you want to import have to be located in a file share or file server in your organization.</span></span>

    <span data-ttu-id="dac46-445">Azure Storage の場所にアップロードした後に PST ファイルのリストを表示するときに実行できるオプションの手順があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="dac46-445">There's an optional step that you can perform to view the list of PST files after they're uploaded to the Azure Storage location.</span></span>

3. <span data-ttu-id="dac46-446">**PST インポート マッピング ファイルを作成する**: PST ファイルを Azure Storage の場所にアップロードしたら、次は PST ファイルのインポート先となるユーザーのメールボックスを指定する、コンマ区切り値 (CSV) ファイルを作成します。PST ファイルはユーザーのプライマリ メールボックスまたはアーカイブ メールボックスにインポートできます。</span><span class="sxs-lookup"><span data-stu-id="dac46-446">**Create a PST import mapping file:** After the PST files have been uploaded to the Azure Storage location, the next step is to create a comma-separated value (CSV) file that specifies which user mailboxes the PST files will be imported to, note that a PST file can be imported to a user's primary mailbox or their archive mailbox.</span></span> <span data-ttu-id="dac46-447">Office 365 インポート サービスは、CSV ファイルの情報を使用して PST ファイルをインポートします。</span><span class="sxs-lookup"><span data-stu-id="dac46-447">The Office 365 Import service uses the information in the CSV file to import the PST files.</span></span>

4. <span data-ttu-id="dac46-448">**PST インポート ジョブを作成する**: 次の手順では、Microsoft 365 コンプライアンス センターの [**PST ファイルのインポート**] ページで PST インポート ジョブを作成し、前の手順で作成した PST インポート マッピング ファイルを送信します。</span><span class="sxs-lookup"><span data-stu-id="dac46-448">**Create a PST import job:** The next step is to create a PST import job on the **Import PST files** page in the Microsoft 365 compliance center and submit the PST import mapping file created in the previous step.</span></span> <span data-ttu-id="dac46-449">インポート ジョブを作成すると、Microsoft 365 によって PST ファイル内のデータが分析されます。その後、実際に PST インポート マッピング ファイルで指定したメールボックスにインポートするデータを制御するフィルターを設定できます。</span><span class="sxs-lookup"><span data-stu-id="dac46-449">After you create the import job, Microsoft 365 analyzes the data in the PST files and then gives you an opportunity to set filters that control what data actually gets imported to the mailboxes specified in the PST import mapping file.</span></span> 

5. <span data-ttu-id="dac46-450">**メールボックスにインポートされる PST データをフィルター処理する**: インポート ジョブを作成すると、Microsoft 365 は PST ファイルに含まれているアイテムの経過時間とさまざまなメッセージの種類を識別することで、PST ファイル内のデータを (安全に) 分析します。</span><span class="sxs-lookup"><span data-stu-id="dac46-450">**Filter the PST data that will be imported to mailboxes:** After the import job is created and started, Microsoft 365 analyzes the data in the PST files (safely and securely) by identifying the age of the items and the different message types included in the PST files.</span></span> <span data-ttu-id="dac46-451">分析が完了し、データをインポートする準備ができたら、PST ファイルに含まれるすべてのデータをインポートするか、インポートするデータをトリミングするかを選ぶことができます。データをトリミングする場合は、インポートするデータを制御するフィルターを設定します。</span><span class="sxs-lookup"><span data-stu-id="dac46-451">When the analysis is completed and the data is ready to import, you have the option to import all the data contained in the PST files or you can trim the data that's imported by setting filters that control what data gets imported.</span></span>

6. <span data-ttu-id="dac46-452">**PST インポート ジョブを開始する:** インポートジョブを開始すると、Microsoft 365 は PST インポートマッピングファイルの情報を使用して、PST ファイルを Azure Storage の場所からユーザーのメールボックスにインポートします。</span><span class="sxs-lookup"><span data-stu-id="dac46-452">**Start the PST import job:** After the import job is started, Microsoft 365 uses the information in the PST import mapping file to import the PSTs files from the Azure Storage location to user mailboxes.</span></span> <span data-ttu-id="dac46-453">インポート ジョブの進捗情報 (インポート中の各 PST ファイルに関する情報を含む) が Microsoft 365 コンプライアンス センターの [**PST ファイルのインポート**] ページに表示されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-453">Status information about the import job (including information about each PST file being imported) is displayed on the **Import PST files** page in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="dac46-454">インポート ジョブが完了すると、ジョブの状態が [**完了**] に設定されます。</span><span class="sxs-lookup"><span data-stu-id="dac46-454">When the import job is finished, the status for the job is set to **Complete**.</span></span>
